{"version":3,"file":"initAsync.js","names":["_config","data","require","_configPlugins","_plist","_interopRequireDefault","_spawnAsync","_chalk","_commander","_fsExtra","_npmPackageArg","_path","_stripAnsi","_terminalLink","_xdl","_CommandError","_interopRequireWildcard","_log","_migration","_ora","_prompts","_clearNativeFolder","CreateApp","_ProjectUtils","_extractTemplateAppAsync","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","FEATURED_TEMPLATES","shortName","name","description","isMacOS","process","platform","assertValidName","folderName","validation","validateName","CommandError","chalk","red","isFolderNameForbidden","parseOptions","command","yes","yarn","npm","install","template","assertFolderEmptyAsync","projectRoot","overwrite","message","Log","newLine","nested","SilentError","resolveProjectRootAsync","input","trim","answer","prompts","type","initial","validate","path","basename","resolve","nonInteractiveHelp","error","code","green","program","cyan","join","fs","ensureDir","padEnd","str","width","len","Math","max","stripAnsi","length","Array","resolveTemplateAsync","resolvedTemplate","version","newestSdkVersion","newestSdkReleaseData","Versions","newestReleasedSdkVersionAsync","versionParam","beta","majorVersion","parseInt","includes","templateSpec","_templateSpec$name","_templateSpec$fetchSp","npmPackageArg","registry","escapedName","raw","fetchSpec","descriptionColumn","map","t","selectAsync","optionsPerPage","choices","separator","value","title","bold","short","actionAsync","incomingProjectRoot","_options$template","warnMigration","options","deprecatedNameArgument","undefined","AbortCommandError","cwd","npmPackageName","debug","projectName","initialConfig","expo","slug","extractTemplateStep","logNewSection","projectPath","extractAndPrepareTemplateAppAsync","succeed","e","fail","packageManager","resolvePackageManager","isBare","directoryExistsAsync","workflow","hasPodsInstalled","needsPodsInstalled","existsSync","installNodeDependenciesAsync","installCocoaPodsAsync","cdPath","getChangeDirectoryPath","addNewLineIfNone","logProjectReadyAsync","logNodeInstallWarning","logCocoaPodsWarning","initGitRepoAsync","installJsDepsStep","root","spawnAsync","log","gray","errno","warn","stdio","dim","macOSComment","addBareUpdatesWarningsAsync","hasExpoUpdatesInstalledAsync","usesOldExpoUpdatesAsync","terminalLink","didConfigureUpdatesProjectFiles","username","UserManager","getCurrentUsernameAsync","configureUpdatesProjectFilesAsync","exp","getConfig","skipSDKVersionRequirement","androidManifestPath","AndroidConfig","Paths","getAndroidManifestAsync","androidManifestJSON","Manifest","readAndroidManifestAsync","result","Updates","setUpdatesConfig","writeAndroidManifestAsync","iosSourceRoot","IOSConfig","getSourceRoot","supportingDirectory","plistFilePath","plist","parse","readFileSync","writeFile","build"],"sources":["../../src/commands/initAsync.ts"],"sourcesContent":["import { getConfig } from '@expo/config';\nimport { AndroidConfig, IOSConfig } from '@expo/config-plugins';\nimport plist from '@expo/plist';\nimport spawnAsync from '@expo/spawn-async';\nimport chalk from 'chalk';\nimport program from 'commander';\nimport fs from 'fs-extra';\nimport npmPackageArg from 'npm-package-arg';\nimport path from 'path';\nimport stripAnsi from 'strip-ansi';\nimport terminalLink from 'terminal-link';\nimport { UserManager, Versions } from 'xdl';\n\nimport CommandError, { AbortCommandError, SilentError } from '../CommandError';\nimport Log from '../log';\nimport { warnMigration } from '../utils/migration';\nimport { logNewSection } from '../utils/ora';\nimport prompts, { selectAsync } from '../utils/prompts';\nimport { directoryExistsAsync } from './eject/clearNativeFolder';\nimport * as CreateApp from './utils/CreateApp';\nimport { hasExpoUpdatesInstalledAsync, usesOldExpoUpdatesAsync } from './utils/ProjectUtils';\nimport { extractAndPrepareTemplateAppAsync } from './utils/extractTemplateAppAsync';\n\ntype Options = {\n  template?: string;\n  install: boolean;\n  npm: boolean;\n  yarn: boolean;\n  yes: boolean;\n};\n\nconst FEATURED_TEMPLATES = [\n  '----- Managed workflow -----',\n  {\n    shortName: 'blank',\n    name: 'expo-template-blank',\n    description: 'a minimal app as clean as an empty canvas',\n  },\n  {\n    shortName: 'blank (TypeScript)',\n    name: 'expo-template-blank-typescript',\n    description: 'same as blank but with TypeScript configuration',\n  },\n  {\n    shortName: 'tabs (TypeScript)',\n    name: 'expo-template-tabs',\n    description: 'several example screens and tabs using react-navigation and TypeScript',\n  },\n  '----- Bare workflow -----',\n  {\n    shortName: 'minimal',\n    name: 'expo-template-bare-minimum',\n    description: 'bare and minimal, just the essentials to get you started',\n  },\n];\n\nconst isMacOS = process.platform === 'darwin';\n\nfunction assertValidName(folderName: string) {\n  const validation = CreateApp.validateName(folderName);\n  if (typeof validation === 'string') {\n    throw new CommandError(\n      `Cannot create an app named ${chalk.red(`\"${folderName}\"`)}. ${validation}`\n    );\n  }\n  const isFolderNameForbidden = CreateApp.isFolderNameForbidden(folderName);\n  if (isFolderNameForbidden) {\n    throw new CommandError(\n      `Cannot create an app named ${chalk.red(\n        `\"${folderName}\"`\n      )} because it would conflict with a dependency of the same name.`\n    );\n  }\n}\n\nfunction parseOptions(command: Partial<Options>): Options {\n  return {\n    yes: !!command.yes,\n    yarn: !!command.yarn,\n    npm: !!command.npm,\n    install: !!command.install,\n    template: command.template,\n  };\n}\n\nasync function assertFolderEmptyAsync(projectRoot: string, folderName?: string) {\n  if (!(await CreateApp.assertFolderEmptyAsync({ projectRoot, folderName, overwrite: false }))) {\n    const message = 'Try using a new directory name, or moving these files.';\n    Log.newLine();\n    Log.nested(message);\n    Log.newLine();\n    throw new SilentError(message);\n  }\n}\n\nasync function resolveProjectRootAsync(input?: string): Promise<string> {\n  let name = input?.trim();\n\n  if (!name) {\n    try {\n      const { answer } = await prompts(\n        {\n          type: 'text',\n          name: 'answer',\n          message: 'What would you like to name your app?',\n          initial: 'my-app',\n          validate: name => {\n            const validation = CreateApp.validateName(path.basename(path.resolve(name)));\n            if (typeof validation === 'string') {\n              return 'Invalid project name: ' + validation;\n            }\n            return true;\n          },\n        },\n        {\n          nonInteractiveHelp: 'Pass the project name using the first argument `expo init <name>`',\n        }\n      );\n\n      if (typeof answer === 'string') {\n        name = answer.trim();\n      }\n    } catch (error: any) {\n      // Handle the aborted message in a custom way.\n      if (error.code !== 'ABORTED') {\n        throw error;\n      }\n    }\n  }\n\n  if (!name) {\n    const message = [\n      '',\n      'Please choose your app name:',\n      `  ${chalk.green(`${program.name()} init`)} ${chalk.cyan('<app-name>')}`,\n      '',\n      `Run ${chalk.green(`${program.name()} init --help`)} for more info`,\n      '',\n    ].join('\\n');\n    Log.nested(message);\n    throw new SilentError(message);\n  }\n\n  const projectRoot = path.resolve(name);\n  const folderName = path.basename(projectRoot);\n\n  assertValidName(folderName);\n\n  await fs.ensureDir(projectRoot);\n\n  await assertFolderEmptyAsync(projectRoot, folderName);\n\n  return projectRoot;\n}\n\nfunction padEnd(str: string, width: number): string {\n  // Pulled from commander for overriding\n  const len = Math.max(0, width - stripAnsi(str).length);\n  return str + Array(len + 1).join(' ');\n}\n\nasync function resolveTemplateAsync(resolvedTemplate?: string | null) {\n  const {\n    version: newestSdkVersion,\n    data: newestSdkReleaseData,\n  } = await Versions.newestReleasedSdkVersionAsync();\n\n  // If the user is opting into a beta then we need to append the template tag explicitly\n  // in order to not fall back to the latest tag for templates.\n  let versionParam = '';\n  if (newestSdkReleaseData?.beta) {\n    const majorVersion = parseInt(newestSdkVersion, 10);\n    versionParam = `@sdk-${majorVersion}`;\n\n    // If the --template flag is provided without an explicit version, then opt-in to\n    // the beta version\n    if (resolvedTemplate && !resolvedTemplate.includes('@')) {\n      resolvedTemplate = `${resolvedTemplate}${versionParam}`;\n    }\n  }\n\n  let templateSpec;\n  if (resolvedTemplate) {\n    templateSpec = npmPackageArg(resolvedTemplate);\n\n    // For backwards compatibility, 'blank' and 'tabs' are aliases for\n    // 'expo-template-blank' and 'expo-template-tabs', respectively.\n    if (\n      templateSpec.name &&\n      templateSpec.registry &&\n      ['blank', 'tabs', 'bare-minimum'].includes(templateSpec.name)\n    ) {\n      templateSpec.escapedName = `expo-template-${templateSpec.name}`;\n      templateSpec.name = templateSpec.escapedName;\n      templateSpec.raw = templateSpec.escapedName;\n    }\n\n    return `${templateSpec.name ?? templateSpec.raw}@${templateSpec.fetchSpec ?? 'latest'}`;\n  }\n\n  const descriptionColumn =\n    Math.max(...FEATURED_TEMPLATES.map(t => (typeof t === 'object' ? t.shortName.length : 0))) + 2;\n  const template = await selectAsync(\n    {\n      message: 'Choose a template:',\n      optionsPerPage: 20,\n      choices: FEATURED_TEMPLATES.map(template => {\n        if (typeof template === 'string') {\n          return prompts.separator(template);\n        } else {\n          return {\n            value: template.name,\n            title:\n              chalk.bold(padEnd(template.shortName, descriptionColumn)) +\n              template.description.trim(),\n            short: template.name,\n          };\n        }\n      }),\n    },\n    {\n      nonInteractiveHelp:\n        '--template: argument is required in non-interactive mode. Valid choices are: \"blank\", \"tabs\", \"bare-minimum\" or any custom template (name of npm package).',\n    }\n  );\n  return `${template}${versionParam}`;\n}\n\nexport async function actionAsync(incomingProjectRoot: string, command: Partial<Options>) {\n  warnMigration('npx create-expo-app --template');\n\n  const options = parseOptions(command);\n\n  const deprecatedNameArgument =\n    typeof (command as any).name === 'string' ? (command as any).name : undefined;\n  if (deprecatedNameArgument) {\n    // Commander doesn't support using the `--name` argument so it shouldn't have been implemented in the first place.\n    // Using `--name` will cause other parts of commander to break since it expects a function and `this.name` would be a string.\n\n    Log.error(chalk`Deprecated: Use {bold expo init [name]} instead of {bold --name [name]}.`);\n    throw new AbortCommandError();\n  }\n\n  // Resolve the name, and projectRoot\n  let projectRoot: string;\n  if (!incomingProjectRoot && options.yes) {\n    projectRoot = path.resolve(process.cwd());\n    const folderName = path.basename(projectRoot);\n    assertValidName(folderName);\n    await assertFolderEmptyAsync(projectRoot, folderName);\n  } else {\n    projectRoot = await resolveProjectRootAsync(incomingProjectRoot);\n  }\n\n  let resolvedTemplate: string | null = options.template ?? null;\n  // @ts-ignore: This guards against someone passing --template without a name after it.\n  if (resolvedTemplate === true) {\n    throw new CommandError('Please specify the template name');\n  }\n\n  // Download and sync templates\n  // TODO(Bacon): revisit\n  if (options.yes && !resolvedTemplate) {\n    resolvedTemplate = 'blank';\n  }\n\n  // Supported templates:\n  // `-t tabs` (tabs, blank, bare-minimum, expo-template-blank-typescript)\n  // `-t tabs@40`\n  // `-t tabs@sdk-40`\n  // `-t tabs@latest`\n  // `-t expo-template-tabs@latest`\n  const npmPackageName = await resolveTemplateAsync(resolvedTemplate);\n\n  Log.debug(`Using template: ${npmPackageName}`);\n\n  const projectName = path.basename(projectRoot);\n  const initialConfig: Record<string, any> & { expo: any } = {\n    // In older templates the `.name` property is set when extracting template files. This is because older templates have the `.name` property set to `HelloWorld`.\n    // Newer templates don't need the `.name` property set, so we don't bother with setting it.\n    expo: {\n      name: projectName,\n      slug: projectName,\n    },\n  };\n\n  const extractTemplateStep = logNewSection('Downloading template.');\n  let projectPath;\n  try {\n    projectPath = await extractAndPrepareTemplateAppAsync(\n      npmPackageName,\n      projectRoot,\n      initialConfig\n    );\n    extractTemplateStep.succeed('Downloaded template.');\n  } catch (e: any) {\n    extractTemplateStep.fail('Something went wrong while downloading and extracting the template.');\n    throw e;\n  }\n\n  // Install dependencies\n\n  const packageManager = CreateApp.resolvePackageManager(options);\n\n  // TODO(Bacon): not this\n  const isBare = await directoryExistsAsync(path.join(projectRoot, 'ios'));\n  const workflow = isBare ? 'bare' : 'managed';\n\n  let hasPodsInstalled: boolean = false;\n  const needsPodsInstalled = fs.existsSync(path.join(projectRoot, 'ios/Podfile'));\n  if (options.install) {\n    await installNodeDependenciesAsync(projectRoot, packageManager);\n    if (needsPodsInstalled) {\n      hasPodsInstalled = await CreateApp.installCocoaPodsAsync(projectRoot);\n    }\n  }\n\n  const cdPath = CreateApp.getChangeDirectoryPath(projectRoot);\n\n  // Log info\n\n  Log.addNewLineIfNone();\n\n  await logProjectReadyAsync(projectRoot, {\n    cdPath,\n    packageManager,\n    workflow,\n  });\n\n  // Log a warning about needing to install node modules\n  if (!options.install) {\n    logNodeInstallWarning(cdPath, packageManager);\n  }\n  if (needsPodsInstalled && !hasPodsInstalled) {\n    logCocoaPodsWarning(cdPath);\n  }\n\n  // Initialize Git at the end to ensure all lock files are committed.\n  await initGitRepoAsync(projectPath);\n}\n\nasync function installNodeDependenciesAsync(projectRoot: string, packageManager: 'yarn' | 'npm') {\n  const installJsDepsStep = logNewSection('Installing JavaScript dependencies.');\n  try {\n    await CreateApp.installNodeDependenciesAsync(projectRoot, packageManager);\n    installJsDepsStep.succeed('Installed JavaScript dependencies.');\n  } catch {\n    installJsDepsStep.fail(\n      `Something went wrong installing JavaScript dependencies. Check your ${packageManager} logs. Continuing to initialize the app.`\n    );\n  }\n}\n\n/**\n * Check if the project is inside an existing Git repo, if so bail out,\n * if not then create a new git repo and commit the initial files.\n *\n * @returns `true` if git is setup.\n */\nasync function initGitRepoAsync(root: string): Promise<boolean> {\n  // let's see if we're in a git tree\n  try {\n    await spawnAsync('git', ['rev-parse', '--is-inside-work-tree'], {\n      cwd: root,\n    });\n    // Log a light notice if we're in a git tree.\n    Log.log(\n      chalk.gray(`Project is already inside of a git repo, skipping ${chalk.bold`git init`}.`)\n    );\n    // Bail out if inside git repo, this makes monorepos a bit easier to setup.\n    return true;\n  } catch (e: any) {\n    if (e.errno === 'ENOENT') {\n      Log.warn('Unable to initialize git repo. `git` not in PATH.');\n      return false;\n    }\n  }\n\n  // not in git tree, so let's init\n  try {\n    await spawnAsync('git', ['init'], { cwd: root });\n    Log.debug('Initialized a git repository.');\n\n    await spawnAsync('git', ['add', '--all'], { cwd: root, stdio: 'ignore' });\n    await spawnAsync('git', ['commit', '-m', 'Created a new Expo app'], {\n      cwd: root,\n      stdio: 'ignore',\n    });\n\n    return true;\n  } catch (e: any) {\n    Log.debug('git error:', e);\n    // no-op -- this is just a convenience and we don't care if it fails\n    return false;\n  }\n}\n\nfunction logNodeInstallWarning(cdPath: string, packageManager: 'yarn' | 'npm'): void {\n  Log.newLine();\n  Log.nested(`⚠️  Before running your app, make sure you have node modules installed:`);\n  Log.nested('');\n  if (cdPath) {\n    // In the case of --yes the project can be created in place so there would be no need to change directories.\n    Log.nested(`  cd ${cdPath}/`);\n  }\n  Log.nested(`  ${packageManager === 'npm' ? 'npm install' : 'yarn'}`);\n  Log.nested('');\n}\n\nfunction logCocoaPodsWarning(cdPath: string): void {\n  if (process.platform !== 'darwin') {\n    return;\n  }\n  Log.newLine();\n  Log.nested(\n    `⚠️  Before running your app on iOS, make sure you have CocoaPods installed and initialize the project:`\n  );\n  Log.nested('');\n  if (cdPath) {\n    // In the case of --yes the project can be created in place so there would be no need to change directories.\n    Log.nested(`  cd ${cdPath}/`);\n  }\n  Log.nested(`  npx pod-install`);\n  Log.nested('');\n}\n\nasync function logProjectReadyAsync(\n  projectRoot: string,\n  {\n    cdPath,\n    packageManager,\n    workflow,\n  }: {\n    cdPath: string;\n    packageManager: string;\n    workflow: 'managed' | 'bare';\n  }\n) {\n  Log.nested(chalk.bold(`✅ Your project is ready!`));\n  Log.newLine();\n\n  // empty string if project was created in current directory\n  if (cdPath) {\n    Log.nested(\n      `To run your project, navigate to the directory and run one of the following ${packageManager} commands.`\n    );\n    Log.newLine();\n    Log.nested(`- ${chalk.bold('cd ' + cdPath)}`);\n  } else {\n    Log.nested(`To run your project, run one of the following ${packageManager} commands.`);\n    Log.newLine();\n  }\n\n  if (workflow === 'managed') {\n    Log.nested(\n      `- ${chalk.bold(`${packageManager} start`)} ${chalk.dim(\n        `# you can open iOS, Android, or web from here, or run them directly with the commands below.`\n      )}`\n    );\n  }\n  Log.nested(`- ${chalk.bold(packageManager === 'npm' ? 'npm run android' : 'yarn android')}`);\n\n  let macOSComment = '';\n  if (!isMacOS && workflow === 'bare') {\n    macOSComment =\n      ' # you need to use macOS to build the iOS project - use managed workflow if you need to do iOS development without a Mac';\n  } else if (!isMacOS && workflow === 'managed') {\n    macOSComment = ' # requires an iOS device or macOS for access to an iOS simulator';\n  }\n  Log.nested(\n    `- ${chalk.bold(packageManager === 'npm' ? 'npm run ios' : 'yarn ios')}${macOSComment}`\n  );\n\n  Log.nested(`- ${chalk.bold(packageManager === 'npm' ? 'npm run web' : 'yarn web')}`);\n\n  if (workflow === 'bare') {\n    Log.newLine();\n    Log.nested(\n      `💡 You can also open up the projects in the ${chalk.bold('ios')} and ${chalk.bold(\n        'android'\n      )} directories with their respective IDEs.`\n    );\n\n    await addBareUpdatesWarningsAsync(projectRoot);\n\n    // TODO: add equivalent of this or some command to wrap it:\n    // # ios\n    // $ open -a Xcode ./ios/{PROJECT_NAME}.xcworkspace\n    // # android\n    // $ open -a /Applications/Android\\\\ Studio.app ./android\n  }\n}\n\nasync function addBareUpdatesWarningsAsync(projectRoot: string) {\n  if (!(await hasExpoUpdatesInstalledAsync(projectRoot))) {\n    return;\n  }\n\n  if (await usesOldExpoUpdatesAsync(projectRoot)) {\n    Log.nested(\n      `🚀 ${terminalLink(\n        'expo-updates',\n        'https://github.com/expo/expo/blob/main/packages/expo-updates/README.md'\n      )} has been configured in your project. Before you do a release build, make sure you run ${chalk.bold(\n        'expo publish'\n      )}. ${terminalLink('Learn more.', 'https://expo.fyi/release-builds-with-expo-updates')}`\n    );\n    return;\n  }\n\n  let didConfigureUpdatesProjectFiles: boolean = false;\n  const username = await UserManager.getCurrentUsernameAsync();\n  if (username) {\n    try {\n      await configureUpdatesProjectFilesAsync(projectRoot, username);\n      didConfigureUpdatesProjectFiles = true;\n    } catch {}\n  }\n\n  if (didConfigureUpdatesProjectFiles) {\n    Log.nested(\n      `🚀 ${terminalLink(\n        'expo-updates',\n        'https://github.com/expo/expo/blob/main/packages/expo-updates/README.md'\n      )} has been configured in your project. If you publish this project under a different user account than ${chalk.bold(\n        username\n      )}, you'll need to update the configuration in Expo.plist and AndroidManifest.xml before making a release build.`\n    );\n  } else {\n    Log.nested(\n      `🚀 ${terminalLink(\n        'expo-updates',\n        'https://github.com/expo/expo/blob/main/packages/expo-updates/README.md'\n      )} has been installed in your project. Before you do a release build, you'll need to configure a few values in Expo.plist and AndroidManifest.xml in order for updates to work.`\n    );\n  }\n}\n\nasync function configureUpdatesProjectFilesAsync(projectRoot: string, username: string) {\n  // skipSDKVersionRequirement here so that this will work when you use the\n  // --no-install flag. the tradeoff is that the SDK version field won't be\n  // filled in, but we should be getting rid of that for expo-updates ASAP\n  // anyways.\n  const { exp } = getConfig(projectRoot, { skipSDKVersionRequirement: true });\n\n  // apply Android config\n  const androidManifestPath = await AndroidConfig.Paths.getAndroidManifestAsync(projectRoot);\n  const androidManifestJSON = await AndroidConfig.Manifest.readAndroidManifestAsync(\n    androidManifestPath\n  );\n  const result = await AndroidConfig.Updates.setUpdatesConfig(\n    projectRoot,\n    exp,\n    androidManifestJSON,\n    username\n  );\n  await AndroidConfig.Manifest.writeAndroidManifestAsync(androidManifestPath, result);\n\n  // apply iOS config\n  const iosSourceRoot = IOSConfig.Paths.getSourceRoot(projectRoot);\n  const supportingDirectory = path.join(iosSourceRoot, 'Supporting');\n\n  const plistFilePath = path.join(supportingDirectory, 'Expo.plist');\n  let data = plist.parse(fs.readFileSync(plistFilePath, 'utf8'));\n  data = IOSConfig.Updates.setUpdatesConfig(projectRoot, exp, data, username);\n\n  await fs.writeFile(plistFilePath, plist.build(data));\n}\n"],"mappings":";;;;;;AAAA,SAAAA,QAAA;EAAA,MAAAC,IAAA,GAAAC,OAAA;EAAAF,OAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAE,eAAA;EAAA,MAAAF,IAAA,GAAAC,OAAA;EAAAC,cAAA,YAAAA,CAAA;IAAA,OAAAF,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAG,OAAA;EAAA,MAAAH,IAAA,GAAAI,sBAAA,CAAAH,OAAA;EAAAE,MAAA,YAAAA,CAAA;IAAA,OAAAH,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAK,YAAA;EAAA,MAAAL,IAAA,GAAAI,sBAAA,CAAAH,OAAA;EAAAI,WAAA,YAAAA,CAAA;IAAA,OAAAL,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAM,OAAA;EAAA,MAAAN,IAAA,GAAAI,sBAAA,CAAAH,OAAA;EAAAK,MAAA,YAAAA,CAAA;IAAA,OAAAN,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAO,WAAA;EAAA,MAAAP,IAAA,GAAAI,sBAAA,CAAAH,OAAA;EAAAM,UAAA,YAAAA,CAAA;IAAA,OAAAP,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAQ,SAAA;EAAA,MAAAR,IAAA,GAAAI,sBAAA,CAAAH,OAAA;EAAAO,QAAA,YAAAA,CAAA;IAAA,OAAAR,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAS,eAAA;EAAA,MAAAT,IAAA,GAAAI,sBAAA,CAAAH,OAAA;EAAAQ,cAAA,YAAAA,CAAA;IAAA,OAAAT,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAU,MAAA;EAAA,MAAAV,IAAA,GAAAI,sBAAA,CAAAH,OAAA;EAAAS,KAAA,YAAAA,CAAA;IAAA,OAAAV,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAW,WAAA;EAAA,MAAAX,IAAA,GAAAI,sBAAA,CAAAH,OAAA;EAAAU,UAAA,YAAAA,CAAA;IAAA,OAAAX,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAY,cAAA;EAAA,MAAAZ,IAAA,GAAAI,sBAAA,CAAAH,OAAA;EAAAW,aAAA,YAAAA,CAAA;IAAA,OAAAZ,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAa,KAAA;EAAA,MAAAb,IAAA,GAAAC,OAAA;EAAAY,IAAA,YAAAA,CAAA;IAAA,OAAAb,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEA,SAAAc,cAAA;EAAA,MAAAd,IAAA,GAAAe,uBAAA,CAAAd,OAAA;EAAAa,aAAA,YAAAA,CAAA;IAAA,OAAAd,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAgB,KAAA;EAAA,MAAAhB,IAAA,GAAAI,sBAAA,CAAAH,OAAA;EAAAe,IAAA,YAAAA,CAAA;IAAA,OAAAhB,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAiB,WAAA;EAAA,MAAAjB,IAAA,GAAAC,OAAA;EAAAgB,UAAA,YAAAA,CAAA;IAAA,OAAAjB,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAkB,KAAA;EAAA,MAAAlB,IAAA,GAAAC,OAAA;EAAAiB,IAAA,YAAAA,CAAA;IAAA,OAAAlB,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAmB,SAAA;EAAA,MAAAnB,IAAA,GAAAe,uBAAA,CAAAd,OAAA;EAAAkB,QAAA,YAAAA,CAAA;IAAA,OAAAnB,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAoB,mBAAA;EAAA,MAAApB,IAAA,GAAAC,OAAA;EAAAmB,kBAAA,YAAAA,CAAA;IAAA,OAAApB,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAqB,UAAA;EAAA,MAAArB,IAAA,GAAAe,uBAAA,CAAAd,OAAA;EAAAoB,SAAA,YAAAA,CAAA;IAAA,OAAArB,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAsB,cAAA;EAAA,MAAAtB,IAAA,GAAAC,OAAA;EAAAqB,aAAA,YAAAA,CAAA;IAAA,OAAAtB,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAuB,yBAAA;EAAA,MAAAvB,IAAA,GAAAC,OAAA;EAAAsB,wBAAA,YAAAA,CAAA;IAAA,OAAAvB,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAAoF,SAAAwB,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAV,wBAAAc,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAG,KAAA,GAAAR,wBAAA,CAAAC,WAAA,OAAAO,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,YAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,SAAAM,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAX,GAAA,QAAAW,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,EAAAW,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,EAAAW,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAX,GAAA,CAAAW,GAAA,SAAAL,MAAA,CAAAJ,OAAA,GAAAF,GAAA,MAAAG,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,EAAAM,MAAA,YAAAA,MAAA;AAAA,SAAA/B,uBAAAyB,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAUpF,MAAMiB,kBAAkB,GAAG,CACzB,8BAA8B,EAC9B;EACEC,SAAS,EAAE,OAAO;EAClBC,IAAI,EAAE,qBAAqB;EAC3BC,WAAW,EAAE;AACf,CAAC,EACD;EACEF,SAAS,EAAE,oBAAoB;EAC/BC,IAAI,EAAE,gCAAgC;EACtCC,WAAW,EAAE;AACf,CAAC,EACD;EACEF,SAAS,EAAE,mBAAmB;EAC9BC,IAAI,EAAE,oBAAoB;EAC1BC,WAAW,EAAE;AACf,CAAC,EACD,2BAA2B,EAC3B;EACEF,SAAS,EAAE,SAAS;EACpBC,IAAI,EAAE,4BAA4B;EAClCC,WAAW,EAAE;AACf,CAAC,CACF;AAED,MAAMC,OAAO,GAAGC,OAAO,CAACC,QAAQ,KAAK,QAAQ;AAE7C,SAASC,eAAeA,CAACC,UAAkB,EAAE;EAC3C,MAAMC,UAAU,GAAGlC,SAAS,CAAD,CAAC,CAACmC,YAAY,CAACF,UAAU,CAAC;EACrD,IAAI,OAAOC,UAAU,KAAK,QAAQ,EAAE;IAClC,MAAM,KAAIE,uBAAY,EACnB,8BAA6BC,gBAAK,CAACC,GAAG,CAAE,IAAGL,UAAW,GAAE,CAAE,KAAIC,UAAW,EAC5E,CAAC;EACH;EACA,MAAMK,qBAAqB,GAAGvC,SAAS,CAAD,CAAC,CAACuC,qBAAqB,CAACN,UAAU,CAAC;EACzE,IAAIM,qBAAqB,EAAE;IACzB,MAAM,KAAIH,uBAAY,EACnB,8BAA6BC,gBAAK,CAACC,GAAG,CACpC,IAAGL,UAAW,GACjB,CAAE,gEACJ,CAAC;EACH;AACF;AAEA,SAASO,YAAYA,CAACC,OAAyB,EAAW;EACxD,OAAO;IACLC,GAAG,EAAE,CAAC,CAACD,OAAO,CAACC,GAAG;IAClBC,IAAI,EAAE,CAAC,CAACF,OAAO,CAACE,IAAI;IACpBC,GAAG,EAAE,CAAC,CAACH,OAAO,CAACG,GAAG;IAClBC,OAAO,EAAE,CAAC,CAACJ,OAAO,CAACI,OAAO;IAC1BC,QAAQ,EAAEL,OAAO,CAACK;EACpB,CAAC;AACH;AAEA,eAAeC,sBAAsBA,CAACC,WAAmB,EAAEf,UAAmB,EAAE;EAC9E,IAAI,EAAE,MAAMjC,SAAS,CAAD,CAAC,CAAC+C,sBAAsB,CAAC;IAAEC,WAAW;IAAEf,UAAU;IAAEgB,SAAS,EAAE;EAAM,CAAC,CAAC,CAAC,EAAE;IAC5F,MAAMC,OAAO,GAAG,wDAAwD;IACxEC,cAAG,CAACC,OAAO,CAAC,CAAC;IACbD,cAAG,CAACE,MAAM,CAACH,OAAO,CAAC;IACnBC,cAAG,CAACC,OAAO,CAAC,CAAC;IACb,MAAM,KAAIE,2BAAW,EAACJ,OAAO,CAAC;EAChC;AACF;AAEA,eAAeK,uBAAuBA,CAACC,KAAc,EAAmB;EACtE,IAAI7B,IAAI,GAAG6B,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEC,IAAI,CAAC,CAAC;EAExB,IAAI,CAAC9B,IAAI,EAAE;IACT,IAAI;MACF,MAAM;QAAE+B;MAAO,CAAC,GAAG,MAAM,IAAAC,kBAAO,EAC9B;QACEC,IAAI,EAAE,MAAM;QACZjC,IAAI,EAAE,QAAQ;QACduB,OAAO,EAAE,uCAAuC;QAChDW,OAAO,EAAE,QAAQ;QACjBC,QAAQ,EAAEnC,IAAI,IAAI;UAChB,MAAMO,UAAU,GAAGlC,SAAS,CAAD,CAAC,CAACmC,YAAY,CAAC4B,eAAI,CAACC,QAAQ,CAACD,eAAI,CAACE,OAAO,CAACtC,IAAI,CAAC,CAAC,CAAC;UAC5E,IAAI,OAAOO,UAAU,KAAK,QAAQ,EAAE;YAClC,OAAO,wBAAwB,GAAGA,UAAU;UAC9C;UACA,OAAO,IAAI;QACb;MACF,CAAC,EACD;QACEgC,kBAAkB,EAAE;MACtB,CACF,CAAC;MAED,IAAI,OAAOR,MAAM,KAAK,QAAQ,EAAE;QAC9B/B,IAAI,GAAG+B,MAAM,CAACD,IAAI,CAAC,CAAC;MACtB;IACF,CAAC,CAAC,OAAOU,KAAU,EAAE;MACnB;MACA,IAAIA,KAAK,CAACC,IAAI,KAAK,SAAS,EAAE;QAC5B,MAAMD,KAAK;MACb;IACF;EACF;EAEA,IAAI,CAACxC,IAAI,EAAE;IACT,MAAMuB,OAAO,GAAG,CACd,EAAE,EACF,8BAA8B,EAC7B,KAAIb,gBAAK,CAACgC,KAAK,CAAE,GAAEC,oBAAO,CAAC3C,IAAI,CAAC,CAAE,OAAM,CAAE,IAAGU,gBAAK,CAACkC,IAAI,CAAC,YAAY,CAAE,EAAC,EACxE,EAAE,EACD,OAAMlC,gBAAK,CAACgC,KAAK,CAAE,GAAEC,oBAAO,CAAC3C,IAAI,CAAC,CAAE,cAAa,CAAE,gBAAe,EACnE,EAAE,CACH,CAAC6C,IAAI,CAAC,IAAI,CAAC;IACZrB,cAAG,CAACE,MAAM,CAACH,OAAO,CAAC;IACnB,MAAM,KAAII,2BAAW,EAACJ,OAAO,CAAC;EAChC;EAEA,MAAMF,WAAW,GAAGe,eAAI,CAACE,OAAO,CAACtC,IAAI,CAAC;EACtC,MAAMM,UAAU,GAAG8B,eAAI,CAACC,QAAQ,CAAChB,WAAW,CAAC;EAE7ChB,eAAe,CAACC,UAAU,CAAC;EAE3B,MAAMwC,kBAAE,CAACC,SAAS,CAAC1B,WAAW,CAAC;EAE/B,MAAMD,sBAAsB,CAACC,WAAW,EAAEf,UAAU,CAAC;EAErD,OAAOe,WAAW;AACpB;AAEA,SAAS2B,MAAMA,CAACC,GAAW,EAAEC,KAAa,EAAU;EAClD;EACA,MAAMC,GAAG,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEH,KAAK,GAAG,IAAAI,oBAAS,EAACL,GAAG,CAAC,CAACM,MAAM,CAAC;EACtD,OAAON,GAAG,GAAGO,KAAK,CAACL,GAAG,GAAG,CAAC,CAAC,CAACN,IAAI,CAAC,GAAG,CAAC;AACvC;AAEA,eAAeY,oBAAoBA,CAACC,gBAAgC,EAAE;EACpE,MAAM;IACJC,OAAO,EAAEC,gBAAgB;IACzB5G,IAAI,EAAE6G;EACR,CAAC,GAAG,MAAMC,eAAQ,CAACC,6BAA6B,CAAC,CAAC;;EAElD;EACA;EACA,IAAIC,YAAY,GAAG,EAAE;EACrB,IAAIH,oBAAoB,aAApBA,oBAAoB,eAApBA,oBAAoB,CAAEI,IAAI,EAAE;IAC9B,MAAMC,YAAY,GAAGC,QAAQ,CAACP,gBAAgB,EAAE,EAAE,CAAC;IACnDI,YAAY,GAAI,QAAOE,YAAa,EAAC;;IAErC;IACA;IACA,IAAIR,gBAAgB,IAAI,CAACA,gBAAgB,CAACU,QAAQ,CAAC,GAAG,CAAC,EAAE;MACvDV,gBAAgB,GAAI,GAAEA,gBAAiB,GAAEM,YAAa,EAAC;IACzD;EACF;EAEA,IAAIK,YAAY;EAChB,IAAIX,gBAAgB,EAAE;IAAA,IAAAY,kBAAA,EAAAC,qBAAA;IACpBF,YAAY,GAAG,IAAAG,wBAAa,EAACd,gBAAgB,CAAC;;IAE9C;IACA;IACA,IACEW,YAAY,CAACrE,IAAI,IACjBqE,YAAY,CAACI,QAAQ,IACrB,CAAC,OAAO,EAAE,MAAM,EAAE,cAAc,CAAC,CAACL,QAAQ,CAACC,YAAY,CAACrE,IAAI,CAAC,EAC7D;MACAqE,YAAY,CAACK,WAAW,GAAI,iBAAgBL,YAAY,CAACrE,IAAK,EAAC;MAC/DqE,YAAY,CAACrE,IAAI,GAAGqE,YAAY,CAACK,WAAW;MAC5CL,YAAY,CAACM,GAAG,GAAGN,YAAY,CAACK,WAAW;IAC7C;IAEA,OAAQ,IAAAJ,kBAAA,GAAED,YAAY,CAACrE,IAAI,cAAAsE,kBAAA,cAAAA,kBAAA,GAAID,YAAY,CAACM,GAAI,IAAC,CAAAJ,qBAAA,GAAEF,YAAY,CAACO,SAAS,cAAAL,qBAAA,cAAAA,qBAAA,GAAI,QAAS,EAAC;EACzF;EAEA,MAAMM,iBAAiB,GACrBzB,IAAI,CAACC,GAAG,CAAC,GAAGvD,kBAAkB,CAACgF,GAAG,CAACC,CAAC,IAAK,OAAOA,CAAC,KAAK,QAAQ,GAAGA,CAAC,CAAChF,SAAS,CAACwD,MAAM,GAAG,CAAE,CAAC,CAAC,GAAG,CAAC;EAChG,MAAMpC,QAAQ,GAAG,MAAM,IAAA6D,sBAAW,EAChC;IACEzD,OAAO,EAAE,oBAAoB;IAC7B0D,cAAc,EAAE,EAAE;IAClBC,OAAO,EAAEpF,kBAAkB,CAACgF,GAAG,CAAC3D,QAAQ,IAAI;MAC1C,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAE;QAChC,OAAOa,kBAAO,CAACmD,SAAS,CAAChE,QAAQ,CAAC;MACpC,CAAC,MAAM;QACL,OAAO;UACLiE,KAAK,EAAEjE,QAAQ,CAACnB,IAAI;UACpBqF,KAAK,EACH3E,gBAAK,CAAC4E,IAAI,CAACtC,MAAM,CAAC7B,QAAQ,CAACpB,SAAS,EAAE8E,iBAAiB,CAAC,CAAC,GACzD1D,QAAQ,CAAClB,WAAW,CAAC6B,IAAI,CAAC,CAAC;UAC7ByD,KAAK,EAAEpE,QAAQ,CAACnB;QAClB,CAAC;MACH;IACF,CAAC;EACH,CAAC,EACD;IACEuC,kBAAkB,EAChB;EACJ,CACF,CAAC;EACD,OAAQ,GAAEpB,QAAS,GAAE6C,YAAa,EAAC;AACrC;AAEO,eAAewB,WAAWA,CAACC,mBAA2B,EAAE3E,OAAyB,EAAE;EAAA,IAAA4E,iBAAA;EACxF,IAAAC,0BAAa,EAAC,gCAAgC,CAAC;EAE/C,MAAMC,OAAO,GAAG/E,YAAY,CAACC,OAAO,CAAC;EAErC,MAAM+E,sBAAsB,GAC1B,OAAQ/E,OAAO,CAASd,IAAI,KAAK,QAAQ,GAAIc,OAAO,CAASd,IAAI,GAAG8F,SAAS;EAC/E,IAAID,sBAAsB,EAAE;IAC1B;IACA;;IAEArE,cAAG,CAACgB,KAAK,CAAC,IAAA9B,gBAAK,CAAC,0EAAyE,CAAC;IAC1F,MAAM,KAAIqF,iCAAiB,EAAC,CAAC;EAC/B;;EAEA;EACA,IAAI1E,WAAmB;EACvB,IAAI,CAACoE,mBAAmB,IAAIG,OAAO,CAAC7E,GAAG,EAAE;IACvCM,WAAW,GAAGe,eAAI,CAACE,OAAO,CAACnC,OAAO,CAAC6F,GAAG,CAAC,CAAC,CAAC;IACzC,MAAM1F,UAAU,GAAG8B,eAAI,CAACC,QAAQ,CAAChB,WAAW,CAAC;IAC7ChB,eAAe,CAACC,UAAU,CAAC;IAC3B,MAAMc,sBAAsB,CAACC,WAAW,EAAEf,UAAU,CAAC;EACvD,CAAC,MAAM;IACLe,WAAW,GAAG,MAAMO,uBAAuB,CAAC6D,mBAAmB,CAAC;EAClE;EAEA,IAAI/B,gBAA+B,IAAAgC,iBAAA,GAAGE,OAAO,CAACzE,QAAQ,cAAAuE,iBAAA,cAAAA,iBAAA,GAAI,IAAI;EAC9D;EACA,IAAIhC,gBAAgB,KAAK,IAAI,EAAE;IAC7B,MAAM,KAAIjD,uBAAY,EAAC,kCAAkC,CAAC;EAC5D;;EAEA;EACA;EACA,IAAImF,OAAO,CAAC7E,GAAG,IAAI,CAAC2C,gBAAgB,EAAE;IACpCA,gBAAgB,GAAG,OAAO;EAC5B;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA,MAAMuC,cAAc,GAAG,MAAMxC,oBAAoB,CAACC,gBAAgB,CAAC;EAEnElC,cAAG,CAAC0E,KAAK,CAAE,mBAAkBD,cAAe,EAAC,CAAC;EAE9C,MAAME,WAAW,GAAG/D,eAAI,CAACC,QAAQ,CAAChB,WAAW,CAAC;EAC9C,MAAM+E,aAAkD,GAAG;IACzD;IACA;IACAC,IAAI,EAAE;MACJrG,IAAI,EAAEmG,WAAW;MACjBG,IAAI,EAAEH;IACR;EACF,CAAC;EAED,MAAMI,mBAAmB,GAAG,IAAAC,oBAAa,EAAC,uBAAuB,CAAC;EAClE,IAAIC,WAAW;EACf,IAAI;IACFA,WAAW,GAAG,MAAM,IAAAC,4DAAiC,EACnDT,cAAc,EACd5E,WAAW,EACX+E,aACF,CAAC;IACDG,mBAAmB,CAACI,OAAO,CAAC,sBAAsB,CAAC;EACrD,CAAC,CAAC,OAAOC,CAAM,EAAE;IACfL,mBAAmB,CAACM,IAAI,CAAC,qEAAqE,CAAC;IAC/F,MAAMD,CAAC;EACT;;EAEA;;EAEA,MAAME,cAAc,GAAGzI,SAAS,CAAD,CAAC,CAAC0I,qBAAqB,CAACnB,OAAO,CAAC;;EAE/D;EACA,MAAMoB,MAAM,GAAG,MAAM,IAAAC,yCAAoB,EAAC7E,eAAI,CAACS,IAAI,CAACxB,WAAW,EAAE,KAAK,CAAC,CAAC;EACxE,MAAM6F,QAAQ,GAAGF,MAAM,GAAG,MAAM,GAAG,SAAS;EAE5C,IAAIG,gBAAyB,GAAG,KAAK;EACrC,MAAMC,kBAAkB,GAAGtE,kBAAE,CAACuE,UAAU,CAACjF,eAAI,CAACS,IAAI,CAACxB,WAAW,EAAE,aAAa,CAAC,CAAC;EAC/E,IAAIuE,OAAO,CAAC1E,OAAO,EAAE;IACnB,MAAMoG,4BAA4B,CAACjG,WAAW,EAAEyF,cAAc,CAAC;IAC/D,IAAIM,kBAAkB,EAAE;MACtBD,gBAAgB,GAAG,MAAM9I,SAAS,CAAD,CAAC,CAACkJ,qBAAqB,CAAClG,WAAW,CAAC;IACvE;EACF;EAEA,MAAMmG,MAAM,GAAGnJ,SAAS,CAAD,CAAC,CAACoJ,sBAAsB,CAACpG,WAAW,CAAC;;EAE5D;;EAEAG,cAAG,CAACkG,gBAAgB,CAAC,CAAC;EAEtB,MAAMC,oBAAoB,CAACtG,WAAW,EAAE;IACtCmG,MAAM;IACNV,cAAc;IACdI;EACF,CAAC,CAAC;;EAEF;EACA,IAAI,CAACtB,OAAO,CAAC1E,OAAO,EAAE;IACpB0G,qBAAqB,CAACJ,MAAM,EAAEV,cAAc,CAAC;EAC/C;EACA,IAAIM,kBAAkB,IAAI,CAACD,gBAAgB,EAAE;IAC3CU,mBAAmB,CAACL,MAAM,CAAC;EAC7B;;EAEA;EACA,MAAMM,gBAAgB,CAACrB,WAAW,CAAC;AACrC;AAEA,eAAea,4BAA4BA,CAACjG,WAAmB,EAAEyF,cAA8B,EAAE;EAC/F,MAAMiB,iBAAiB,GAAG,IAAAvB,oBAAa,EAAC,qCAAqC,CAAC;EAC9E,IAAI;IACF,MAAMnI,SAAS,CAAD,CAAC,CAACiJ,4BAA4B,CAACjG,WAAW,EAAEyF,cAAc,CAAC;IACzEiB,iBAAiB,CAACpB,OAAO,CAAC,oCAAoC,CAAC;EACjE,CAAC,CAAC,MAAM;IACNoB,iBAAiB,CAAClB,IAAI,CACnB,uEAAsEC,cAAe,0CACxF,CAAC;EACH;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAegB,gBAAgBA,CAACE,IAAY,EAAoB;EAC9D;EACA,IAAI;IACF,MAAM,IAAAC,qBAAU,EAAC,KAAK,EAAE,CAAC,WAAW,EAAE,uBAAuB,CAAC,EAAE;MAC9DjC,GAAG,EAAEgC;IACP,CAAC,CAAC;IACF;IACAxG,cAAG,CAAC0G,GAAG,CACLxH,gBAAK,CAACyH,IAAI,CAAE,qDAAoDzH,gBAAK,CAAC4E,IAAK,UAAU,GAAE,CACzF,CAAC;IACD;IACA,OAAO,IAAI;EACb,CAAC,CAAC,OAAOsB,CAAM,EAAE;IACf,IAAIA,CAAC,CAACwB,KAAK,KAAK,QAAQ,EAAE;MACxB5G,cAAG,CAAC6G,IAAI,CAAC,mDAAmD,CAAC;MAC7D,OAAO,KAAK;IACd;EACF;;EAEA;EACA,IAAI;IACF,MAAM,IAAAJ,qBAAU,EAAC,KAAK,EAAE,CAAC,MAAM,CAAC,EAAE;MAAEjC,GAAG,EAAEgC;IAAK,CAAC,CAAC;IAChDxG,cAAG,CAAC0E,KAAK,CAAC,+BAA+B,CAAC;IAE1C,MAAM,IAAA+B,qBAAU,EAAC,KAAK,EAAE,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE;MAAEjC,GAAG,EAAEgC,IAAI;MAAEM,KAAK,EAAE;IAAS,CAAC,CAAC;IACzE,MAAM,IAAAL,qBAAU,EAAC,KAAK,EAAE,CAAC,QAAQ,EAAE,IAAI,EAAE,wBAAwB,CAAC,EAAE;MAClEjC,GAAG,EAAEgC,IAAI;MACTM,KAAK,EAAE;IACT,CAAC,CAAC;IAEF,OAAO,IAAI;EACb,CAAC,CAAC,OAAO1B,CAAM,EAAE;IACfpF,cAAG,CAAC0E,KAAK,CAAC,YAAY,EAAEU,CAAC,CAAC;IAC1B;IACA,OAAO,KAAK;EACd;AACF;AAEA,SAASgB,qBAAqBA,CAACJ,MAAc,EAAEV,cAA8B,EAAQ;EACnFtF,cAAG,CAACC,OAAO,CAAC,CAAC;EACbD,cAAG,CAACE,MAAM,CAAE,yEAAwE,CAAC;EACrFF,cAAG,CAACE,MAAM,CAAC,EAAE,CAAC;EACd,IAAI8F,MAAM,EAAE;IACV;IACAhG,cAAG,CAACE,MAAM,CAAE,QAAO8F,MAAO,GAAE,CAAC;EAC/B;EACAhG,cAAG,CAACE,MAAM,CAAE,KAAIoF,cAAc,KAAK,KAAK,GAAG,aAAa,GAAG,MAAO,EAAC,CAAC;EACpEtF,cAAG,CAACE,MAAM,CAAC,EAAE,CAAC;AAChB;AAEA,SAASmG,mBAAmBA,CAACL,MAAc,EAAQ;EACjD,IAAIrH,OAAO,CAACC,QAAQ,KAAK,QAAQ,EAAE;IACjC;EACF;EACAoB,cAAG,CAACC,OAAO,CAAC,CAAC;EACbD,cAAG,CAACE,MAAM,CACP,wGACH,CAAC;EACDF,cAAG,CAACE,MAAM,CAAC,EAAE,CAAC;EACd,IAAI8F,MAAM,EAAE;IACV;IACAhG,cAAG,CAACE,MAAM,CAAE,QAAO8F,MAAO,GAAE,CAAC;EAC/B;EACAhG,cAAG,CAACE,MAAM,CAAE,mBAAkB,CAAC;EAC/BF,cAAG,CAACE,MAAM,CAAC,EAAE,CAAC;AAChB;AAEA,eAAeiG,oBAAoBA,CACjCtG,WAAmB,EACnB;EACEmG,MAAM;EACNV,cAAc;EACdI;AAKF,CAAC,EACD;EACA1F,cAAG,CAACE,MAAM,CAAChB,gBAAK,CAAC4E,IAAI,CAAE,0BAAyB,CAAC,CAAC;EAClD9D,cAAG,CAACC,OAAO,CAAC,CAAC;;EAEb;EACA,IAAI+F,MAAM,EAAE;IACVhG,cAAG,CAACE,MAAM,CACP,+EAA8EoF,cAAe,YAChG,CAAC;IACDtF,cAAG,CAACC,OAAO,CAAC,CAAC;IACbD,cAAG,CAACE,MAAM,CAAE,KAAIhB,gBAAK,CAAC4E,IAAI,CAAC,KAAK,GAAGkC,MAAM,CAAE,EAAC,CAAC;EAC/C,CAAC,MAAM;IACLhG,cAAG,CAACE,MAAM,CAAE,iDAAgDoF,cAAe,YAAW,CAAC;IACvFtF,cAAG,CAACC,OAAO,CAAC,CAAC;EACf;EAEA,IAAIyF,QAAQ,KAAK,SAAS,EAAE;IAC1B1F,cAAG,CAACE,MAAM,CACP,KAAIhB,gBAAK,CAAC4E,IAAI,CAAE,GAAEwB,cAAe,QAAO,CAAE,IAAGpG,gBAAK,CAAC6H,GAAG,CACpD,8FACH,CAAE,EACJ,CAAC;EACH;EACA/G,cAAG,CAACE,MAAM,CAAE,KAAIhB,gBAAK,CAAC4E,IAAI,CAACwB,cAAc,KAAK,KAAK,GAAG,iBAAiB,GAAG,cAAc,CAAE,EAAC,CAAC;EAE5F,IAAI0B,YAAY,GAAG,EAAE;EACrB,IAAI,CAACtI,OAAO,IAAIgH,QAAQ,KAAK,MAAM,EAAE;IACnCsB,YAAY,GACV,0HAA0H;EAC9H,CAAC,MAAM,IAAI,CAACtI,OAAO,IAAIgH,QAAQ,KAAK,SAAS,EAAE;IAC7CsB,YAAY,GAAG,mEAAmE;EACpF;EACAhH,cAAG,CAACE,MAAM,CACP,KAAIhB,gBAAK,CAAC4E,IAAI,CAACwB,cAAc,KAAK,KAAK,GAAG,aAAa,GAAG,UAAU,CAAE,GAAE0B,YAAa,EACxF,CAAC;EAEDhH,cAAG,CAACE,MAAM,CAAE,KAAIhB,gBAAK,CAAC4E,IAAI,CAACwB,cAAc,KAAK,KAAK,GAAG,aAAa,GAAG,UAAU,CAAE,EAAC,CAAC;EAEpF,IAAII,QAAQ,KAAK,MAAM,EAAE;IACvB1F,cAAG,CAACC,OAAO,CAAC,CAAC;IACbD,cAAG,CAACE,MAAM,CACP,+CAA8ChB,gBAAK,CAAC4E,IAAI,CAAC,KAAK,CAAE,QAAO5E,gBAAK,CAAC4E,IAAI,CAChF,SACF,CAAE,0CACJ,CAAC;IAED,MAAMmD,2BAA2B,CAACpH,WAAW,CAAC;;IAE9C;IACA;IACA;IACA;IACA;EACF;AACF;;AAEA,eAAeoH,2BAA2BA,CAACpH,WAAmB,EAAE;EAC9D,IAAI,EAAE,MAAM,IAAAqH,4CAA4B,EAACrH,WAAW,CAAC,CAAC,EAAE;IACtD;EACF;EAEA,IAAI,MAAM,IAAAsH,uCAAuB,EAACtH,WAAW,CAAC,EAAE;IAC9CG,cAAG,CAACE,MAAM,CACP,MAAK,IAAAkH,uBAAY,EAChB,cAAc,EACd,wEACF,CAAE,0FAAyFlI,gBAAK,CAAC4E,IAAI,CACnG,cACF,CAAE,KAAI,IAAAsD,uBAAY,EAAC,aAAa,EAAE,mDAAmD,CAAE,EACzF,CAAC;IACD;EACF;EAEA,IAAIC,+BAAwC,GAAG,KAAK;EACpD,MAAMC,QAAQ,GAAG,MAAMC,kBAAW,CAACC,uBAAuB,CAAC,CAAC;EAC5D,IAAIF,QAAQ,EAAE;IACZ,IAAI;MACF,MAAMG,iCAAiC,CAAC5H,WAAW,EAAEyH,QAAQ,CAAC;MAC9DD,+BAA+B,GAAG,IAAI;IACxC,CAAC,CAAC,MAAM,CAAC;EACX;EAEA,IAAIA,+BAA+B,EAAE;IACnCrH,cAAG,CAACE,MAAM,CACP,MAAK,IAAAkH,uBAAY,EAChB,cAAc,EACd,wEACF,CAAE,yGAAwGlI,gBAAK,CAAC4E,IAAI,CAClHwD,QACF,CAAE,gHACJ,CAAC;EACH,CAAC,MAAM;IACLtH,cAAG,CAACE,MAAM,CACP,MAAK,IAAAkH,uBAAY,EAChB,cAAc,EACd,wEACF,CAAE,+KACJ,CAAC;EACH;AACF;AAEA,eAAeK,iCAAiCA,CAAC5H,WAAmB,EAAEyH,QAAgB,EAAE;EACtF;EACA;EACA;EACA;EACA,MAAM;IAAEI;EAAI,CAAC,GAAG,IAAAC,mBAAS,EAAC9H,WAAW,EAAE;IAAE+H,yBAAyB,EAAE;EAAK,CAAC,CAAC;;EAE3E;EACA,MAAMC,mBAAmB,GAAG,MAAMC,8BAAa,CAACC,KAAK,CAACC,uBAAuB,CAACnI,WAAW,CAAC;EAC1F,MAAMoI,mBAAmB,GAAG,MAAMH,8BAAa,CAACI,QAAQ,CAACC,wBAAwB,CAC/EN,mBACF,CAAC;EACD,MAAMO,MAAM,GAAG,MAAMN,8BAAa,CAACO,OAAO,CAACC,gBAAgB,CACzDzI,WAAW,EACX6H,GAAG,EACHO,mBAAmB,EACnBX,QACF,CAAC;EACD,MAAMQ,8BAAa,CAACI,QAAQ,CAACK,yBAAyB,CAACV,mBAAmB,EAAEO,MAAM,CAAC;;EAEnF;EACA,MAAMI,aAAa,GAAGC,0BAAS,CAACV,KAAK,CAACW,aAAa,CAAC7I,WAAW,CAAC;EAChE,MAAM8I,mBAAmB,GAAG/H,eAAI,CAACS,IAAI,CAACmH,aAAa,EAAE,YAAY,CAAC;EAElE,MAAMI,aAAa,GAAGhI,eAAI,CAACS,IAAI,CAACsH,mBAAmB,EAAE,YAAY,CAAC;EAClE,IAAInN,IAAI,GAAGqN,gBAAK,CAACC,KAAK,CAACxH,kBAAE,CAACyH,YAAY,CAACH,aAAa,EAAE,MAAM,CAAC,CAAC;EAC9DpN,IAAI,GAAGiN,0BAAS,CAACJ,OAAO,CAACC,gBAAgB,CAACzI,WAAW,EAAE6H,GAAG,EAAElM,IAAI,EAAE8L,QAAQ,CAAC;EAE3E,MAAMhG,kBAAE,CAAC0H,SAAS,CAACJ,aAAa,EAAEC,gBAAK,CAACI,KAAK,CAACzN,IAAI,CAAC,CAAC;AACtD"}