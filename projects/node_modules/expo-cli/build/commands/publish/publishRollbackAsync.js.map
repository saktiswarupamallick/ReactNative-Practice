{"version":3,"file":"publishRollbackAsync.js","names":["_assert","data","_interopRequireDefault","require","_CommandError","_PublishUtils","_deprecationNotice","_getUsageAsync","obj","__esModule","default","actionAsync","projectRoot","options","printDeprecationNotice","assert","channelId","releaseChannel","sdkVersion","usage","getUsageAsync","CommandError","platform","rollbackPublicationFromChannelAsync"],"sources":["../../../src/commands/publish/publishRollbackAsync.ts"],"sourcesContent":["import assert from 'assert';\n\nimport CommandError from '../../CommandError';\nimport { RollbackOptions, rollbackPublicationFromChannelAsync } from '../utils/PublishUtils';\nimport { printDeprecationNotice } from './deprecationNotice';\nimport { getUsageAsync } from './getUsageAsync';\n\ntype Options = {\n  releaseChannel?: string;\n  sdkVersion?: string;\n  platform?: string;\n  channelId?: string;\n};\n\nexport async function actionAsync(projectRoot: string, options: Options) {\n  printDeprecationNotice();\n  assert(\n    !options.channelId,\n    '--channel-id flag is deprecated and does not do anything. Please use --release-channel and --sdk-version instead.'\n  );\n\n  if (!options.releaseChannel || !options.sdkVersion) {\n    const usage = await getUsageAsync(projectRoot);\n    throw new CommandError(usage);\n  }\n  if (options.platform) {\n    if (options.platform !== 'android' && options.platform !== 'ios') {\n      throw new CommandError(\n        'Platform must be either android or ios. Leave out the platform flag to target both platforms.'\n      );\n    }\n  }\n  await rollbackPublicationFromChannelAsync(projectRoot, options as RollbackOptions);\n}\n"],"mappings":";;;;;;AAAA,SAAAA,QAAA;EAAA,MAAAC,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAH,OAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEA,SAAAG,cAAA;EAAA,MAAAH,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAC,aAAA,YAAAA,CAAA;IAAA,OAAAH,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAI,cAAA;EAAA,MAAAJ,IAAA,GAAAE,OAAA;EAAAE,aAAA,YAAAA,CAAA;IAAA,OAAAJ,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAK,mBAAA;EAAA,MAAAL,IAAA,GAAAE,OAAA;EAAAG,kBAAA,YAAAA,CAAA;IAAA,OAAAL,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAM,eAAA;EAAA,MAAAN,IAAA,GAAAE,OAAA;EAAAI,cAAA,YAAAA,CAAA;IAAA,OAAAN,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAAgD,SAAAC,uBAAAM,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AASzC,eAAeG,WAAWA,CAACC,WAAmB,EAAEC,OAAgB,EAAE;EACvE,IAAAC,2CAAsB,EAAC,CAAC;EACxB,IAAAC,iBAAM,EACJ,CAACF,OAAO,CAACG,SAAS,EAClB,mHACF,CAAC;EAED,IAAI,CAACH,OAAO,CAACI,cAAc,IAAI,CAACJ,OAAO,CAACK,UAAU,EAAE;IAClD,MAAMC,KAAK,GAAG,MAAM,IAAAC,8BAAa,EAACR,WAAW,CAAC;IAC9C,MAAM,KAAIS,uBAAY,EAACF,KAAK,CAAC;EAC/B;EACA,IAAIN,OAAO,CAACS,QAAQ,EAAE;IACpB,IAAIT,OAAO,CAACS,QAAQ,KAAK,SAAS,IAAIT,OAAO,CAACS,QAAQ,KAAK,KAAK,EAAE;MAChE,MAAM,KAAID,uBAAY,EACpB,+FACF,CAAC;IACH;EACF;EACA,MAAM,IAAAE,mDAAmC,EAACX,WAAW,EAAEC,OAA0B,CAAC;AACpF"}