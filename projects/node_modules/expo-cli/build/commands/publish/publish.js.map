{"version":3,"file":"publish.js","names":["_chalk","data","_interopRequireDefault","require","_applyAsyncAction","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_interopRequireWildcard","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_default","program","applyAsyncActionProjectDir","command","alias","description","chalk","yellow","bold","helpGroup","option","Promise","resolve","then","checkConfig","parseInt"],"sources":["../../../src/commands/publish/publish.ts"],"sourcesContent":["import chalk from 'chalk';\nimport type { Command } from 'commander';\n\nimport { applyAsyncActionProjectDir } from '../utils/applyAsyncAction';\n\nexport default function (program: Command) {\n  applyAsyncActionProjectDir(\n    program\n      .command('publish [path]')\n      .alias('p')\n      .description(`${chalk.yellow`Superseded`} by ${chalk.bold`eas update`} in eas-cli`)\n      .helpGroup('deprecated')\n      .option('-q, --quiet', 'Suppress verbose output from the Metro bundler.')\n      .option('-s, --send-to [dest]', 'A phone number or email address to send a link to')\n      .option('-c, --clear', 'Clear the Metro bundler cache')\n      .option(\n        '-t, --target <managed|bare>',\n        'Target environment for which this publish is intended. Options are `managed` or `bare`.'\n      )\n      // TODO(anp) set a default for this dynamically based on whether we're inside a container?\n      .option('--max-workers <num>', 'Maximum number of tasks to allow Metro to spawn.')\n      .option(\n        '--release-channel <name>',\n        \"The release channel to publish to. Default is 'default'.\",\n        'default'\n      ),\n    () => import('./publishAsync')\n  );\n\n  applyAsyncActionProjectDir(\n    program\n      .command('publish:set [path]')\n      .alias('ps')\n      .description(`${chalk.yellow`Superseded`} by ${chalk.bold`eas update:republish`} in eas-cli`)\n      .helpGroup('deprecated')\n      .option(\n        '-c, --release-channel <name>',\n        'The channel to set the published release. (Required)'\n      )\n      .option(\n        '-p, --publish-id <publish-id>',\n        'The id of the published release to serve from the channel. (Required)'\n      ),\n    () => import('./publishSetAsync'),\n    { checkConfig: true }\n  );\n\n  applyAsyncActionProjectDir(\n    program\n      .command('publish:rollback [path]')\n      .alias('pr')\n      .description(`${chalk.yellow`Superseded`} by ${chalk.bold`eas update:republish`} in eas-cli`)\n      .helpGroup('deprecated')\n      .option('--channel-id <channel-id>', 'This flag is deprecated.')\n      .option('-c, --release-channel <name>', 'The channel to rollback from. (Required)')\n      .option('-s, --sdk-version <version>', 'The sdk version to rollback. (Required)')\n      .option('-p, --platform <android|ios>', 'The platform to rollback.'),\n    () => import('./publishRollbackAsync'),\n    { checkConfig: true }\n  );\n\n  applyAsyncActionProjectDir(\n    program\n      .command('publish:history [path]')\n      .alias('ph')\n      .description(`${chalk.yellow`Superseded`} by ${chalk.bold`eas update:list`} in eas-cli`)\n      .helpGroup('deprecated')\n      .option(\n        '-c, --release-channel <name>',\n        'Filter by release channel. If this flag is not included, the most recent publications will be shown.'\n      )\n      .option(\n        '--count <number-of-logs>',\n        'Number of logs to view, maximum 100, default 5.',\n        parseInt\n      )\n      .option(\n        '-p, --platform <android|ios>',\n        'Filter by platform, android or ios. Defaults to both platforms.'\n      )\n      .option('-s, --sdk-version <version>', 'Filter by SDK version e.g. 35.0.0')\n      .option('-r, --raw', 'Produce some raw output.'),\n    () => import('./publishHistoryAsync'),\n    { checkConfig: true }\n  );\n\n  applyAsyncActionProjectDir(\n    program\n      .command('publish:details [path]')\n      .alias('pd')\n      .description(`${chalk.yellow`Superseded`} by ${chalk.bold`eas update:view`} in eas-cli`)\n      .helpGroup('deprecated')\n      .option('--publish-id <publish-id>', 'Publication id. (Required)')\n      .option('-r, --raw', 'Produce some raw output.'),\n    () => import('./publishDetailsAsync'),\n    { checkConfig: true }\n  );\n}\n"],"mappings":";;;;;;AAAA,SAAAA,OAAA;EAAA,MAAAC,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAH,MAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAGA,SAAAG,kBAAA;EAAA,MAAAH,IAAA,GAAAE,OAAA;EAAAC,iBAAA,YAAAA,CAAA;IAAA,OAAAH,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAAuE,SAAAC,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,SAAAG,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAI,wBAAAR,GAAA,EAAAI,WAAA,SAAAA,WAAA,IAAAJ,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAS,KAAA,GAAAN,wBAAA,CAAAC,WAAA,OAAAK,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAV,GAAA,YAAAS,KAAA,CAAAE,GAAA,CAAAX,GAAA,SAAAY,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAjB,GAAA,QAAAiB,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAApB,GAAA,EAAAiB,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAhB,GAAA,EAAAiB,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAjB,GAAA,CAAAiB,GAAA,SAAAL,MAAA,CAAAV,OAAA,GAAAF,GAAA,MAAAS,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAtB,GAAA,EAAAY,MAAA,YAAAA,MAAA;AAExD,SAAAW,SAAUC,OAAgB,EAAE;EACzC,IAAAC,8CAA0B,EACxBD,OAAO,CACJE,OAAO,CAAC,gBAAgB,CAAC,CACzBC,KAAK,CAAC,GAAG,CAAC,CACVC,WAAW,CAAE,GAAEC,gBAAK,CAACC,MAAO,YAAY,OAAMD,gBAAK,CAACE,IAAK,YAAY,aAAY,CAAC,CAClFC,SAAS,CAAC,YAAY,CAAC,CACvBC,MAAM,CAAC,aAAa,EAAE,iDAAiD,CAAC,CACxEA,MAAM,CAAC,sBAAsB,EAAE,mDAAmD,CAAC,CACnFA,MAAM,CAAC,aAAa,EAAE,+BAA+B,CAAC,CACtDA,MAAM,CACL,6BAA6B,EAC7B,yFACF;EACA;EAAA,CACCA,MAAM,CAAC,qBAAqB,EAAE,kDAAkD,CAAC,CACjFA,MAAM,CACL,0BAA0B,EAC1B,0DAA0D,EAC1D,SACF,CAAC,EACH,MAAAC,OAAA,CAAAC,OAAA,GAAAC,IAAA,OAAA5B,uBAAA,CAAAV,OAAA,CAAa,gBAAgB,GAC/B,CAAC;EAED,IAAA2B,8CAA0B,EACxBD,OAAO,CACJE,OAAO,CAAC,oBAAoB,CAAC,CAC7BC,KAAK,CAAC,IAAI,CAAC,CACXC,WAAW,CAAE,GAAEC,gBAAK,CAACC,MAAO,YAAY,OAAMD,gBAAK,CAACE,IAAK,sBAAsB,aAAY,CAAC,CAC5FC,SAAS,CAAC,YAAY,CAAC,CACvBC,MAAM,CACL,8BAA8B,EAC9B,sDACF,CAAC,CACAA,MAAM,CACL,+BAA+B,EAC/B,uEACF,CAAC,EACH,MAAAC,OAAA,CAAAC,OAAA,GAAAC,IAAA,OAAA5B,uBAAA,CAAAV,OAAA,CAAa,mBAAmB,GAAC,EACjC;IAAEuC,WAAW,EAAE;EAAK,CACtB,CAAC;EAED,IAAAZ,8CAA0B,EACxBD,OAAO,CACJE,OAAO,CAAC,yBAAyB,CAAC,CAClCC,KAAK,CAAC,IAAI,CAAC,CACXC,WAAW,CAAE,GAAEC,gBAAK,CAACC,MAAO,YAAY,OAAMD,gBAAK,CAACE,IAAK,sBAAsB,aAAY,CAAC,CAC5FC,SAAS,CAAC,YAAY,CAAC,CACvBC,MAAM,CAAC,2BAA2B,EAAE,0BAA0B,CAAC,CAC/DA,MAAM,CAAC,8BAA8B,EAAE,0CAA0C,CAAC,CAClFA,MAAM,CAAC,6BAA6B,EAAE,yCAAyC,CAAC,CAChFA,MAAM,CAAC,8BAA8B,EAAE,2BAA2B,CAAC,EACtE,MAAAC,OAAA,CAAAC,OAAA,GAAAC,IAAA,OAAA5B,uBAAA,CAAAV,OAAA,CAAa,wBAAwB,GAAC,EACtC;IAAEuC,WAAW,EAAE;EAAK,CACtB,CAAC;EAED,IAAAZ,8CAA0B,EACxBD,OAAO,CACJE,OAAO,CAAC,wBAAwB,CAAC,CACjCC,KAAK,CAAC,IAAI,CAAC,CACXC,WAAW,CAAE,GAAEC,gBAAK,CAACC,MAAO,YAAY,OAAMD,gBAAK,CAACE,IAAK,iBAAiB,aAAY,CAAC,CACvFC,SAAS,CAAC,YAAY,CAAC,CACvBC,MAAM,CACL,8BAA8B,EAC9B,sGACF,CAAC,CACAA,MAAM,CACL,0BAA0B,EAC1B,iDAAiD,EACjDK,QACF,CAAC,CACAL,MAAM,CACL,8BAA8B,EAC9B,iEACF,CAAC,CACAA,MAAM,CAAC,6BAA6B,EAAE,mCAAmC,CAAC,CAC1EA,MAAM,CAAC,WAAW,EAAE,0BAA0B,CAAC,EAClD,MAAAC,OAAA,CAAAC,OAAA,GAAAC,IAAA,OAAA5B,uBAAA,CAAAV,OAAA,CAAa,uBAAuB,GAAC,EACrC;IAAEuC,WAAW,EAAE;EAAK,CACtB,CAAC;EAED,IAAAZ,8CAA0B,EACxBD,OAAO,CACJE,OAAO,CAAC,wBAAwB,CAAC,CACjCC,KAAK,CAAC,IAAI,CAAC,CACXC,WAAW,CAAE,GAAEC,gBAAK,CAACC,MAAO,YAAY,OAAMD,gBAAK,CAACE,IAAK,iBAAiB,aAAY,CAAC,CACvFC,SAAS,CAAC,YAAY,CAAC,CACvBC,MAAM,CAAC,2BAA2B,EAAE,4BAA4B,CAAC,CACjEA,MAAM,CAAC,WAAW,EAAE,0BAA0B,CAAC,EAClD,MAAAC,OAAA,CAAAC,OAAA,GAAAC,IAAA,OAAA5B,uBAAA,CAAAV,OAAA,CAAa,uBAAuB,GAAC,EACrC;IAAEuC,WAAW,EAAE;EAAK,CACtB,CAAC;AACH"}