{"version":3,"file":"webhooksUpdateAsync.js","names":["_assert","data","_interopRequireDefault","require","_ora","_utils","obj","__esModule","default","actionAsync","projectRoot","id","url","event","options","_event","_secret","assert","secret","validateSecret","project","client","setupAsync","webhook","getAsync","spinner","ora","start","patchAsync","succeed"],"sources":["../../../src/commands/webhooks/webhooksUpdateAsync.ts"],"sourcesContent":["import assert from 'assert';\n\nimport { ora } from '../../utils/ora';\nimport { setupAsync, validateSecret, WebhookEvent } from './utils';\n\ntype Options = {\n  id?: string;\n  url?: string;\n  event?: WebhookEvent;\n  secret?: string;\n};\n\nexport async function actionAsync(projectRoot: string, { id, url, event, ...options }: Options) {\n  assert(typeof id === 'string', '--id must be a webhook ID');\n  assert(event == null || typeof event === 'string', '--event: string is required');\n  let secret = validateSecret(options);\n\n  const { project, client } = await setupAsync(projectRoot);\n\n  const webhook = await client.getAsync(`projects/${project.id}/webhooks/${id}`);\n  event = event ?? webhook.event;\n  secret = secret ?? webhook.secret;\n\n  const spinner = ora(`Updating webhook ${id}`).start();\n  await client.patchAsync(`projects/${project.id}/webhooks/${id}`, { url, event, secret });\n  spinner.succeed();\n}\n"],"mappings":";;;;;;AAAA,SAAAA,QAAA;EAAA,MAAAC,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAH,OAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEA,SAAAG,KAAA;EAAA,MAAAH,IAAA,GAAAE,OAAA;EAAAC,IAAA,YAAAA,CAAA;IAAA,OAAAH,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAI,OAAA;EAAA,MAAAJ,IAAA,GAAAE,OAAA;EAAAE,MAAA,YAAAA,CAAA;IAAA,OAAAJ,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAAmE,SAAAC,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAS5D,eAAeG,WAAWA,CAACC,WAAmB,EAAE;EAAEC,EAAE;EAAEC,GAAG;EAAEC,KAAK;EAAE,GAAGC;AAAiB,CAAC,EAAE;EAAA,IAAAC,MAAA,EAAAC,OAAA;EAC9F,IAAAC,iBAAM,EAAC,OAAON,EAAE,KAAK,QAAQ,EAAE,2BAA2B,CAAC;EAC3D,IAAAM,iBAAM,EAACJ,KAAK,IAAI,IAAI,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE,6BAA6B,CAAC;EACjF,IAAIK,MAAM,GAAG,IAAAC,uBAAc,EAACL,OAAO,CAAC;EAEpC,MAAM;IAAEM,OAAO;IAAEC;EAAO,CAAC,GAAG,MAAM,IAAAC,mBAAU,EAACZ,WAAW,CAAC;EAEzD,MAAMa,OAAO,GAAG,MAAMF,MAAM,CAACG,QAAQ,CAAE,YAAWJ,OAAO,CAACT,EAAG,aAAYA,EAAG,EAAC,CAAC;EAC9EE,KAAK,IAAAE,MAAA,GAAGF,KAAK,cAAAE,MAAA,cAAAA,MAAA,GAAIQ,OAAO,CAACV,KAAK;EAC9BK,MAAM,IAAAF,OAAA,GAAGE,MAAM,cAAAF,OAAA,cAAAA,OAAA,GAAIO,OAAO,CAACL,MAAM;EAEjC,MAAMO,OAAO,GAAG,IAAAC,UAAG,EAAE,oBAAmBf,EAAG,EAAC,CAAC,CAACgB,KAAK,CAAC,CAAC;EACrD,MAAMN,MAAM,CAACO,UAAU,CAAE,YAAWR,OAAO,CAACT,EAAG,aAAYA,EAAG,EAAC,EAAE;IAAEC,GAAG;IAAEC,KAAK;IAAEK;EAAO,CAAC,CAAC;EACxFO,OAAO,CAACI,OAAO,CAAC,CAAC;AACnB"}