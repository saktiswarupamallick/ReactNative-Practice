{"version":3,"file":"maybeBailOnGitStatusAsync.js","names":["_commander","data","_interopRequireDefault","require","_getenv","_log","_prompts","_ProjectUtils","obj","__esModule","default","EXPO_NO_GIT_STATUS","boolish","maybeBailOnGitStatusAsync","Log","warn","isGitStatusClean","validateGitStatusAsync","program","nonInteractive","addNewLineIfNone","answer","confirmAsync","message","newLine"],"sources":["../../../src/commands/utils/maybeBailOnGitStatusAsync.ts"],"sourcesContent":["import program from 'commander';\nimport { boolish } from 'getenv';\n\nimport Log from '../../log';\nimport { confirmAsync } from '../../utils/prompts';\nimport { validateGitStatusAsync } from './ProjectUtils';\n\nconst EXPO_NO_GIT_STATUS = boolish('EXPO_NO_GIT_STATUS', false);\n\nexport default async function maybeBailOnGitStatusAsync(): Promise<boolean> {\n  if (EXPO_NO_GIT_STATUS) {\n    Log.warn(\n      'Git status is dirty but the command will continue because EXPO_NO_GIT_STATUS is enabled...'\n    );\n    return false;\n  }\n  const isGitStatusClean = await validateGitStatusAsync();\n\n  // Give people a chance to bail out if git working tree is dirty\n  if (!isGitStatusClean) {\n    if (program.nonInteractive) {\n      Log.warn(\n        `Git status is dirty but the command will continue because nonInteractive is enabled.`\n      );\n      return false;\n    }\n\n    Log.addNewLineIfNone();\n    const answer = await confirmAsync({\n      message: `Would you like to proceed?`,\n    });\n\n    if (!answer) {\n      return true;\n    }\n\n    Log.newLine();\n  }\n  return false;\n}\n"],"mappings":";;;;;;AAAA,SAAAA,WAAA;EAAA,MAAAC,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAH,UAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAG,QAAA;EAAA,MAAAH,IAAA,GAAAE,OAAA;EAAAC,OAAA,YAAAA,CAAA;IAAA,OAAAH,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEA,SAAAI,KAAA;EAAA,MAAAJ,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAE,IAAA,YAAAA,CAAA;IAAA,OAAAJ,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAK,SAAA;EAAA,MAAAL,IAAA,GAAAE,OAAA;EAAAG,QAAA,YAAAA,CAAA;IAAA,OAAAL,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAM,cAAA;EAAA,MAAAN,IAAA,GAAAE,OAAA;EAAAI,aAAA,YAAAA,CAAA;IAAA,OAAAN,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAAwD,SAAAC,uBAAAM,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAExD,MAAMG,kBAAkB,GAAG,IAAAC,iBAAO,EAAC,oBAAoB,EAAE,KAAK,CAAC;AAEhD,eAAeC,yBAAyBA,CAAA,EAAqB;EAC1E,IAAIF,kBAAkB,EAAE;IACtBG,cAAG,CAACC,IAAI,CACN,4FACF,CAAC;IACD,OAAO,KAAK;EACd;EACA,MAAMC,gBAAgB,GAAG,MAAM,IAAAC,sCAAsB,EAAC,CAAC;;EAEvD;EACA,IAAI,CAACD,gBAAgB,EAAE;IACrB,IAAIE,oBAAO,CAACC,cAAc,EAAE;MAC1BL,cAAG,CAACC,IAAI,CACL,sFACH,CAAC;MACD,OAAO,KAAK;IACd;IAEAD,cAAG,CAACM,gBAAgB,CAAC,CAAC;IACtB,MAAMC,MAAM,GAAG,MAAM,IAAAC,uBAAY,EAAC;MAChCC,OAAO,EAAG;IACZ,CAAC,CAAC;IAEF,IAAI,CAACF,MAAM,EAAE;MACX,OAAO,IAAI;IACb;IAEAP,cAAG,CAACU,OAAO,CAAC,CAAC;EACf;EACA,OAAO,KAAK;AACd"}