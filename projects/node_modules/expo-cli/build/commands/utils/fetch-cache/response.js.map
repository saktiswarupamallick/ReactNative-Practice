{"version":3,"file":"response.js","names":["_nodeFetch","data","require","responseInternalSymbol","Object","getOwnPropertySymbols","Response","NFCResponse","constructor","bodyStream","metaData","ejectFromCache","ejectSelfFromCache","fromCache","serializeMetaFromNodeFetchResponse","res","url","status","statusText","headers","raw","size","timeout","counter","exports"],"sources":["../../../../src/commands/utils/fetch-cache/response.ts"],"sourcesContent":["import { CacheObject } from 'cacache';\nimport { BodyInit, Response, ResponseInit } from 'node-fetch';\n\nconst responseInternalSymbol = Object.getOwnPropertySymbols(new Response())[1];\n\nexport class NFCResponse extends Response {\n  constructor(\n    bodyStream?: BodyInit,\n    metaData?: ResponseInit,\n    public ejectFromCache: () => Promise<[CacheObject, CacheObject]> = function ejectFromCache(\n      this: any\n    ) {\n      return this.ejectSelfFromCache();\n    },\n    public fromCache: boolean = false\n  ) {\n    super(bodyStream, metaData);\n  }\n\n  static serializeMetaFromNodeFetchResponse(res: Response) {\n    const metaData = {\n      url: res.url,\n      status: res.status,\n      statusText: res.statusText,\n      headers: res.headers.raw(),\n      size: res.size,\n      timeout: res.timeout,\n      // @ts-ignore\n      counter: res[responseInternalSymbol].counter,\n    };\n\n    return metaData;\n  }\n}\n"],"mappings":";;;;;;AACA,SAAAA,WAAA;EAAA,MAAAC,IAAA,GAAAC,OAAA;EAAAF,UAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEA,MAAME,sBAAsB,GAAGC,MAAM,CAACC,qBAAqB,CAAC,KAAIC,qBAAQ,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAEvE,MAAMC,WAAW,SAASD,qBAAQ,CAAC;EACxCE,WAAWA,CACTC,UAAqB,EACrBC,QAAuB,EAChBC,cAAyD,GAAG,SAASA,cAAcA,CAAA,EAExF;IACA,OAAO,IAAI,CAACC,kBAAkB,CAAC,CAAC;EAClC,CAAC,EACMC,SAAkB,GAAG,KAAK,EACjC;IACA,KAAK,CAACJ,UAAU,EAAEC,QAAQ,CAAC;IAAC,KAPrBC,cAAyD,GAAzDA,cAAyD;IAAA,KAKzDE,SAAkB,GAAlBA,SAAkB;EAG3B;EAEA,OAAOC,kCAAkCA,CAACC,GAAa,EAAE;IACvD,MAAML,QAAQ,GAAG;MACfM,GAAG,EAAED,GAAG,CAACC,GAAG;MACZC,MAAM,EAAEF,GAAG,CAACE,MAAM;MAClBC,UAAU,EAAEH,GAAG,CAACG,UAAU;MAC1BC,OAAO,EAAEJ,GAAG,CAACI,OAAO,CAACC,GAAG,CAAC,CAAC;MAC1BC,IAAI,EAAEN,GAAG,CAACM,IAAI;MACdC,OAAO,EAAEP,GAAG,CAACO,OAAO;MACpB;MACAC,OAAO,EAAER,GAAG,CAACZ,sBAAsB,CAAC,CAACoB;IACvC,CAAC;IAED,OAAOb,QAAQ;EACjB;AACF;AAACc,OAAA,CAAAjB,WAAA,GAAAA,WAAA"}