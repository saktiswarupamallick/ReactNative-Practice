{"version":3,"file":"AndroidApiV2Wrapper.js","names":["ApiClient","constructor","api","getAllCredentialsApi","_await$this$api$getAs","getAsync","credentials","getAllCredentialsForAppApi","experienceName","updateKeystoreApi","keystore","putAsync","updateFcmKeyApi","fcmApiKey","removeKeystoreApi","deleteAsync","removeFcmKeyApi","exports","default"],"sources":["../../../src/credentials/api/AndroidApiV2Wrapper.ts"],"sourcesContent":["import { ApiV2 } from 'xdl';\n\nimport { AndroidCredentials, Keystore } from '../credentials';\n\ntype AllCredentialsApiResponse = AndroidCredentials[];\n\n// This class should not be used directly, use only as part of cached api client from ./AndroidApi.ts\n// or mock it in tests (it's easier to mock this class than ApiV2 directly)\nexport default class ApiClient {\n  constructor(private api: ApiV2) {}\n\n  public async getAllCredentialsApi(): Promise<AllCredentialsApiResponse> {\n    return (await this.api.getAsync('credentials/android'))?.credentials || [];\n  }\n  public async getAllCredentialsForAppApi(experienceName: string): Promise<AndroidCredentials> {\n    return await this.api.getAsync(`credentials/android/${experienceName}`);\n  }\n  public async updateKeystoreApi(experienceName: string, keystore: Keystore): Promise<void> {\n    return await this.api.putAsync(`credentials/android/keystore/${experienceName}`, { keystore });\n  }\n  public async updateFcmKeyApi(experienceName: string, fcmApiKey: string): Promise<void> {\n    return await this.api.putAsync(`credentials/android/push/${experienceName}`, { fcmApiKey });\n  }\n  public async removeKeystoreApi(experienceName: string): Promise<void> {\n    await this.api.deleteAsync(`credentials/android/keystore/${experienceName}`);\n  }\n  public async removeFcmKeyApi(experienceName: string): Promise<void> {\n    await this.api.deleteAsync(`credentials/android/push/${experienceName}`);\n  }\n}\n"],"mappings":";;;;;;AAMA;AACA;AACe,MAAMA,SAAS,CAAC;EAC7BC,WAAWA,CAASC,GAAU,EAAE;IAAA,KAAZA,GAAU,GAAVA,GAAU;EAAG;EAEjC,MAAaC,oBAAoBA,CAAA,EAAuC;IAAA,IAAAC,qBAAA;IACtE,OAAO,EAAAA,qBAAA,GAAC,MAAM,IAAI,CAACF,GAAG,CAACG,QAAQ,CAAC,qBAAqB,CAAC,cAAAD,qBAAA,uBAA/CA,qBAAA,CAAkDE,WAAW,KAAI,EAAE;EAC5E;EACA,MAAaC,0BAA0BA,CAACC,cAAsB,EAA+B;IAC3F,OAAO,MAAM,IAAI,CAACN,GAAG,CAACG,QAAQ,CAAE,uBAAsBG,cAAe,EAAC,CAAC;EACzE;EACA,MAAaC,iBAAiBA,CAACD,cAAsB,EAAEE,QAAkB,EAAiB;IACxF,OAAO,MAAM,IAAI,CAACR,GAAG,CAACS,QAAQ,CAAE,gCAA+BH,cAAe,EAAC,EAAE;MAAEE;IAAS,CAAC,CAAC;EAChG;EACA,MAAaE,eAAeA,CAACJ,cAAsB,EAAEK,SAAiB,EAAiB;IACrF,OAAO,MAAM,IAAI,CAACX,GAAG,CAACS,QAAQ,CAAE,4BAA2BH,cAAe,EAAC,EAAE;MAAEK;IAAU,CAAC,CAAC;EAC7F;EACA,MAAaC,iBAAiBA,CAACN,cAAsB,EAAiB;IACpE,MAAM,IAAI,CAACN,GAAG,CAACa,WAAW,CAAE,gCAA+BP,cAAe,EAAC,CAAC;EAC9E;EACA,MAAaQ,eAAeA,CAACR,cAAsB,EAAiB;IAClE,MAAM,IAAI,CAACN,GAAG,CAACa,WAAW,CAAE,4BAA2BP,cAAe,EAAC,CAAC;EAC1E;AACF;AAACS,OAAA,CAAAC,OAAA,GAAAlB,SAAA"}