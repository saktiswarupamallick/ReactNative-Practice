{"version":3,"file":"SetupIosDist.js","names":["iosDistView","data","_interopRequireWildcard","require","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","SetupIosDist","constructor","app","open","ctx","user","Error","configuredDistCert","ios","getDistCert","isValid","validateDistributionCertificate","CreateOrReuseDistributionCert","exports"],"sources":["../../../src/credentials/views/SetupIosDist.ts"],"sourcesContent":["import { AppLookupParams } from '../api/IosApi';\nimport { Context, IView } from '../context';\nimport * as iosDistView from './IosDistCert';\n\nexport class SetupIosDist implements IView {\n  constructor(private app: AppLookupParams) {}\n\n  async open(ctx: Context): Promise<IView | null> {\n    if (!ctx.user) {\n      throw new Error(`This workflow requires you to be logged in.`);\n    }\n\n    const configuredDistCert = await ctx.ios.getDistCert(this.app);\n\n    if (configuredDistCert) {\n      // we dont need to setup if we have a valid dist cert on file\n      const isValid = await iosDistView.validateDistributionCertificate(ctx, configuredDistCert);\n      if (isValid) {\n        return null;\n      }\n    }\n\n    return new iosDistView.CreateOrReuseDistributionCert(this.app);\n  }\n}\n"],"mappings":";;;;;;AAEA,SAAAA,YAAA;EAAA,MAAAC,IAAA,GAAAC,uBAAA,CAAAC,OAAA;EAAAH,WAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAA6C,SAAAG,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAH,wBAAAO,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAG,KAAA,GAAAR,wBAAA,CAAAC,WAAA,OAAAO,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,YAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,SAAAM,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAX,GAAA,QAAAW,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,EAAAW,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,EAAAW,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAX,GAAA,CAAAW,GAAA,SAAAL,MAAA,CAAAJ,OAAA,GAAAF,GAAA,MAAAG,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,EAAAM,MAAA,YAAAA,MAAA;AAEtC,MAAMW,YAAY,CAAkB;EACzCC,WAAWA,CAASC,GAAoB,EAAE;IAAA,KAAtBA,GAAoB,GAApBA,GAAoB;EAAG;EAE3C,MAAMC,IAAIA,CAACC,GAAY,EAAyB;IAC9C,IAAI,CAACA,GAAG,CAACC,IAAI,EAAE;MACb,MAAM,IAAIC,KAAK,CAAE,6CAA4C,CAAC;IAChE;IAEA,MAAMC,kBAAkB,GAAG,MAAMH,GAAG,CAACI,GAAG,CAACC,WAAW,CAAC,IAAI,CAACP,GAAG,CAAC;IAE9D,IAAIK,kBAAkB,EAAE;MACtB;MACA,MAAMG,OAAO,GAAG,MAAMpC,WAAW,CAAD,CAAC,CAACqC,+BAA+B,CAACP,GAAG,EAAEG,kBAAkB,CAAC;MAC1F,IAAIG,OAAO,EAAE;QACX,OAAO,IAAI;MACb;IACF;IAEA,OAAO,KAAIpC,WAAW,CAAD,CAAC,CAACsC,6BAA6B,EAAC,IAAI,CAACV,GAAG,CAAC;EAChE;AACF;AAACW,OAAA,CAAAb,YAAA,GAAAA,YAAA"}