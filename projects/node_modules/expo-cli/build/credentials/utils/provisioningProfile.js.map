{"version":3,"file":"provisioningProfile.js","names":["_plist","data","_interopRequireDefault","require","obj","__esModule","default","readAppleTeam","dataBase64","_profilePlist$TeamIde","profilePlist","parse","teamId","teamName","Error","readProfileName","buffer","Buffer","from","profile","toString","plist"],"sources":["../../../src/credentials/utils/provisioningProfile.ts"],"sourcesContent":["import plist, { PlistArray, PlistObject } from '@expo/plist';\n\ninterface AppleTeam {\n  teamId: string;\n  teamName: string;\n}\n\nfunction readAppleTeam(dataBase64: string): AppleTeam {\n  const profilePlist = parse(dataBase64);\n  const teamId = (profilePlist['TeamIdentifier'] as PlistArray)?.[0] as string;\n  const teamName = profilePlist['TeamName'] as string;\n  if (!teamId) {\n    throw new Error('Team identifier is missing from provisoning profile');\n  }\n  return { teamId, teamName };\n}\n\nfunction readProfileName(dataBase64: string): string {\n  const profilePlist = parse(dataBase64);\n  return profilePlist['Name'] as string;\n}\n\nfunction parse(dataBase64: string): PlistObject {\n  try {\n    const buffer = Buffer.from(dataBase64, 'base64');\n    const profile = buffer.toString('utf-8');\n    return plist.parse(profile) as PlistObject;\n  } catch {\n    throw new Error('Provisioning profile is malformed');\n  }\n}\n\nexport { readAppleTeam, readProfileName };\n"],"mappings":";;;;;;;AAAA,SAAAA,OAAA;EAAA,MAAAC,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAH,MAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAA6D,SAAAC,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAO7D,SAASG,aAAaA,CAACC,UAAkB,EAAa;EAAA,IAAAC,qBAAA;EACpD,MAAMC,YAAY,GAAGC,KAAK,CAACH,UAAU,CAAC;EACtC,MAAMI,MAAM,IAAAH,qBAAA,GAAIC,YAAY,CAAC,gBAAgB,CAAC,cAAAD,qBAAA,uBAA/BA,qBAAA,CAAiD,CAAC,CAAW;EAC5E,MAAMI,QAAQ,GAAGH,YAAY,CAAC,UAAU,CAAW;EACnD,IAAI,CAACE,MAAM,EAAE;IACX,MAAM,IAAIE,KAAK,CAAC,qDAAqD,CAAC;EACxE;EACA,OAAO;IAAEF,MAAM;IAAEC;EAAS,CAAC;AAC7B;AAEA,SAASE,eAAeA,CAACP,UAAkB,EAAU;EACnD,MAAME,YAAY,GAAGC,KAAK,CAACH,UAAU,CAAC;EACtC,OAAOE,YAAY,CAAC,MAAM,CAAC;AAC7B;AAEA,SAASC,KAAKA,CAACH,UAAkB,EAAe;EAC9C,IAAI;IACF,MAAMQ,MAAM,GAAGC,MAAM,CAACC,IAAI,CAACV,UAAU,EAAE,QAAQ,CAAC;IAChD,MAAMW,OAAO,GAAGH,MAAM,CAACI,QAAQ,CAAC,OAAO,CAAC;IACxC,OAAOC,gBAAK,CAACV,KAAK,CAACQ,OAAO,CAAC;EAC7B,CAAC,CAAC,MAAM;IACN,MAAM,IAAIL,KAAK,CAAC,mCAAmC,CAAC;EACtD;AACF"}