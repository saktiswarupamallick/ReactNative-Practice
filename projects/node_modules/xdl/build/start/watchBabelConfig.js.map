{"version":3,"file":"watchBabelConfig.js","names":["_chalk","data","_interopRequireDefault","require","_fs","_path","_resolveFrom","_internal","obj","__esModule","default","watchingFiles","getProjectBabelConfigFile","projectRoot","resolveFrom","silent","watchBabelConfigForProject","configPath","watchBabelConfig","includes","push","configName","path","relative","watchFile","cur","prev","size","ProjectUtils","logInfo","chalk","bold"],"sources":["../../src/start/watchBabelConfig.ts"],"sourcesContent":["import chalk from 'chalk';\nimport { watchFile } from 'fs';\nimport path from 'path';\nimport resolveFrom from 'resolve-from';\n\nimport { ProjectUtils } from '../internal';\n\n// List of files that are being observed.\nconst watchingFiles: string[] = [];\n\n/**\n * Get the babel configuration file for the project.\n */\nexport function getProjectBabelConfigFile(projectRoot: string): string | undefined {\n  return (\n    resolveFrom.silent(projectRoot, './babel.config.js') ||\n    resolveFrom.silent(projectRoot, './.babelrc') ||\n    resolveFrom.silent(projectRoot, './.babelrc.js')\n  );\n}\n\nexport function watchBabelConfigForProject(projectRoot: string) {\n  const configPath = getProjectBabelConfigFile(projectRoot);\n  if (configPath) {\n    return watchBabelConfig(projectRoot, configPath);\n  }\n  return configPath;\n}\n\n/**\n * Watch the babel configuration file and warn to reload the CLI if it changes.\n */\nexport function watchBabelConfig(projectRoot: string, configPath: string): void {\n  if (watchingFiles.includes(configPath)) {\n    return;\n  }\n\n  watchingFiles.push(configPath);\n  const configName = path.relative(projectRoot, configPath);\n  watchFile(configPath, (cur: any, prev: any) => {\n    if (prev.size || cur.size) {\n      ProjectUtils.logInfo(\n        projectRoot,\n        'expo',\n        `\\u203A Detected a change in ${chalk.bold(\n          configName\n        )}. Restart the server to see the new results.`\n      );\n    }\n  });\n}\n"],"mappings":";;;;;;;;AAAA,SAAAA,OAAA;EAAA,MAAAC,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAH,MAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAG,IAAA;EAAA,MAAAH,IAAA,GAAAE,OAAA;EAAAC,GAAA,YAAAA,CAAA;IAAA,OAAAH,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAI,MAAA;EAAA,MAAAJ,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAE,KAAA,YAAAA,CAAA;IAAA,OAAAJ,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAK,aAAA;EAAA,MAAAL,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAG,YAAA,YAAAA,CAAA;IAAA,OAAAL,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEA,SAAAM,UAAA;EAAA,MAAAN,IAAA,GAAAE,OAAA;EAAAI,SAAA,YAAAA,CAAA;IAAA,OAAAN,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAA2C,SAAAC,uBAAAM,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE3C;AACA,MAAMG,aAAuB,GAAG,EAAE;;AAElC;AACA;AACA;AACO,SAASC,yBAAyBA,CAACC,WAAmB,EAAsB;EACjF,OACEC,sBAAW,CAACC,MAAM,CAACF,WAAW,EAAE,mBAAmB,CAAC,IACpDC,sBAAW,CAACC,MAAM,CAACF,WAAW,EAAE,YAAY,CAAC,IAC7CC,sBAAW,CAACC,MAAM,CAACF,WAAW,EAAE,eAAe,CAAC;AAEpD;AAEO,SAASG,0BAA0BA,CAACH,WAAmB,EAAE;EAC9D,MAAMI,UAAU,GAAGL,yBAAyB,CAACC,WAAW,CAAC;EACzD,IAAII,UAAU,EAAE;IACd,OAAOC,gBAAgB,CAACL,WAAW,EAAEI,UAAU,CAAC;EAClD;EACA,OAAOA,UAAU;AACnB;;AAEA;AACA;AACA;AACO,SAASC,gBAAgBA,CAACL,WAAmB,EAAEI,UAAkB,EAAQ;EAC9E,IAAIN,aAAa,CAACQ,QAAQ,CAACF,UAAU,CAAC,EAAE;IACtC;EACF;EAEAN,aAAa,CAACS,IAAI,CAACH,UAAU,CAAC;EAC9B,MAAMI,UAAU,GAAGC,eAAI,CAACC,QAAQ,CAACV,WAAW,EAAEI,UAAU,CAAC;EACzD,IAAAO,eAAS,EAACP,UAAU,EAAE,CAACQ,GAAQ,EAAEC,IAAS,KAAK;IAC7C,IAAIA,IAAI,CAACC,IAAI,IAAIF,GAAG,CAACE,IAAI,EAAE;MACzBC,wBAAY,CAACC,OAAO,CAClBhB,WAAW,EACX,MAAM,EACL,+BAA8BiB,gBAAK,CAACC,IAAI,CACvCV,UACF,CAAE,8CACJ,CAAC;IACH;EACF,CAAC,CAAC;AACJ"}