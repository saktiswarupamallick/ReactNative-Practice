{"version":3,"file":"Xcode.js","names":["_child_process","data","require","_internal","minimumVersion","exports","appStoreId","_xcodeVersion","getXcodeVersion","_execSync$toString$ma","last","execSync","stdio","toString","match","Logger","global","error","openAppStore","appId","link","getAppStoreLink","process","platform"],"sources":["../src/Xcode.ts"],"sourcesContent":["import { execSync } from 'child_process';\n\nimport { Logger } from './internal';\n\n// Based on the RN docs (Aug 2020).\nexport const minimumVersion = 9.4;\nexport const appStoreId = '497799835';\n\nlet _xcodeVersion: string | null | false = false;\n\nexport function getXcodeVersion(): string | null {\n  // This method anywhere from 1-2s so cache the results in case we run it multiple times\n  // (like in run:ios or reopening on iOS for development build).\n  if (_xcodeVersion !== false) {\n    return _xcodeVersion;\n  }\n  try {\n    const last = execSync('xcodebuild -version', { stdio: 'pipe' })\n      .toString()\n      .match(/^Xcode (\\d+\\.\\d+)/)?.[1];\n    // Convert to a semver string\n    if (last) {\n      _xcodeVersion = `${last}.0`;\n      return _xcodeVersion;\n    }\n    // not sure what's going on\n    Logger.global.error(\n      'Unable to check Xcode version. Command ran successfully but no version number was found.'\n    );\n  } catch {\n    // not installed\n  }\n  _xcodeVersion = null;\n  return _xcodeVersion;\n}\n\n/**\n * Open a link to the App Store. Just link in mobile apps, **never** redirect without prompting first.\n *\n * @param appId\n */\nexport function openAppStore(appId: string) {\n  const link = getAppStoreLink(appId);\n  execSync(`open ${link}`, { stdio: 'ignore' });\n}\n\nfunction getAppStoreLink(appId: string): string {\n  if (process.platform === 'darwin') {\n    // TODO: Is there ever a case where the macappstore isn't available on mac?\n    return `macappstore://itunes.apple.com/app/id${appId}`;\n  }\n  return `https://apps.apple.com/us/app/id${appId}`;\n}\n"],"mappings":";;;;;;;;;AAAA,SAAAA,eAAA;EAAA,MAAAC,IAAA,GAAAC,OAAA;EAAAF,cAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEA,SAAAE,UAAA;EAAA,MAAAF,IAAA,GAAAC,OAAA;EAAAC,SAAA,YAAAA,CAAA;IAAA,OAAAF,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEA;AACO,MAAMG,cAAc,GAAG,GAAG;AAACC,OAAA,CAAAD,cAAA,GAAAA,cAAA;AAC3B,MAAME,UAAU,GAAG,WAAW;AAACD,OAAA,CAAAC,UAAA,GAAAA,UAAA;AAEtC,IAAIC,aAAoC,GAAG,KAAK;AAEzC,SAASC,eAAeA,CAAA,EAAkB;EAC/C;EACA;EACA,IAAID,aAAa,KAAK,KAAK,EAAE;IAC3B,OAAOA,aAAa;EACtB;EACA,IAAI;IAAA,IAAAE,qBAAA;IACF,MAAMC,IAAI,IAAAD,qBAAA,GAAG,IAAAE,yBAAQ,EAAC,qBAAqB,EAAE;MAAEC,KAAK,EAAE;IAAO,CAAC,CAAC,CAC5DC,QAAQ,CAAC,CAAC,CACVC,KAAK,CAAC,mBAAmB,CAAC,cAAAL,qBAAA,uBAFhBA,qBAAA,CAEmB,CAAC,CAAC;IAClC;IACA,IAAIC,IAAI,EAAE;MACRH,aAAa,GAAI,GAAEG,IAAK,IAAG;MAC3B,OAAOH,aAAa;IACtB;IACA;IACAQ,kBAAM,CAACC,MAAM,CAACC,KAAK,CACjB,0FACF,CAAC;EACH,CAAC,CAAC,MAAM;IACN;EAAA;EAEFV,aAAa,GAAG,IAAI;EACpB,OAAOA,aAAa;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASW,YAAYA,CAACC,KAAa,EAAE;EAC1C,MAAMC,IAAI,GAAGC,eAAe,CAACF,KAAK,CAAC;EACnC,IAAAR,yBAAQ,EAAE,QAAOS,IAAK,EAAC,EAAE;IAAER,KAAK,EAAE;EAAS,CAAC,CAAC;AAC/C;AAEA,SAASS,eAAeA,CAACF,KAAa,EAAU;EAC9C,IAAIG,OAAO,CAACC,QAAQ,KAAK,QAAQ,EAAE;IACjC;IACA,OAAQ,wCAAuCJ,KAAM,EAAC;EACxD;EACA,OAAQ,mCAAkCA,KAAM,EAAC;AACnD"}