{"version":3,"file":"ArtifactUtils.js","names":["_fsExtra","data","_interopRequireDefault","require","_path","_internal","obj","__esModule","default","writeArtifactSafelyAsync","projectRoot","keyName","artifactPath","artifact","pathToWrite","path","resolve","fs","existsSync","dirname","errorMsg","logger","global","warn","writeFile"],"sources":["../../src/tools/ArtifactUtils.ts"],"sourcesContent":["import fs from 'fs-extra';\nimport path from 'path';\n\nimport { Logger as logger } from '../internal';\n\nexport async function writeArtifactSafelyAsync(\n  projectRoot: string,\n  keyName: string | null,\n  artifactPath: string,\n  artifact: string | Uint8Array\n) {\n  const pathToWrite = path.resolve(projectRoot, artifactPath);\n  if (!fs.existsSync(path.dirname(pathToWrite))) {\n    const errorMsg = keyName\n      ? `app.json specifies: ${pathToWrite}, but that directory does not exist.`\n      : `app.json specifies ${keyName}: ${pathToWrite}, but that directory does not exist.`;\n    logger.global.warn(errorMsg);\n  } else {\n    await fs.writeFile(pathToWrite, artifact);\n  }\n}\n"],"mappings":";;;;;;AAAA,SAAAA,SAAA;EAAA,MAAAC,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAH,QAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAG,MAAA;EAAA,MAAAH,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAC,KAAA,YAAAA,CAAA;IAAA,OAAAH,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEA,SAAAI,UAAA;EAAA,MAAAJ,IAAA,GAAAE,OAAA;EAAAE,SAAA,YAAAA,CAAA;IAAA,OAAAJ,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAA+C,SAAAC,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAExC,eAAeG,wBAAwBA,CAC5CC,WAAmB,EACnBC,OAAsB,EACtBC,YAAoB,EACpBC,QAA6B,EAC7B;EACA,MAAMC,WAAW,GAAGC,eAAI,CAACC,OAAO,CAACN,WAAW,EAAEE,YAAY,CAAC;EAC3D,IAAI,CAACK,kBAAE,CAACC,UAAU,CAACH,eAAI,CAACI,OAAO,CAACL,WAAW,CAAC,CAAC,EAAE;IAC7C,MAAMM,QAAQ,GAAGT,OAAO,GACnB,uBAAsBG,WAAY,sCAAqC,GACvE,sBAAqBH,OAAQ,KAAIG,WAAY,sCAAqC;IACvFO,kBAAM,CAACC,MAAM,CAACC,IAAI,CAACH,QAAQ,CAAC;EAC9B,CAAC,MAAM;IACL,MAAMH,kBAAE,CAACO,SAAS,CAACV,WAAW,EAAED,QAAQ,CAAC;EAC3C;AACF"}