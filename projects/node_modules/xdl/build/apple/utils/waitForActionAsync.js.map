{"version":3,"file":"waitForActionAsync.js","names":["_delayAsync","data","require","TimeoutError","Error","exports","waitForActionAsync","action","interval","maxWaitTime","complete","start","Date","now","delayAsync"],"sources":["../../../src/apple/utils/waitForActionAsync.ts"],"sourcesContent":["import { delayAsync } from '../../utils/delayAsync';\n\nexport class TimeoutError extends Error {}\n\nexport async function waitForActionAsync<T>({\n  action,\n  interval = 100,\n  maxWaitTime = 20000,\n}: {\n  action: () => T | Promise<T>;\n  interval?: number;\n  maxWaitTime?: number;\n}): Promise<T> {\n  let complete: T;\n  const start = Date.now();\n  do {\n    complete = await action();\n\n    await delayAsync(interval);\n    if (Date.now() - start > maxWaitTime) {\n      break;\n    }\n  } while (!complete);\n\n  return complete;\n}\n"],"mappings":";;;;;;;AAAA,SAAAA,YAAA;EAAA,MAAAC,IAAA,GAAAC,OAAA;EAAAF,WAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEO,MAAME,YAAY,SAASC,KAAK,CAAC;AAAEC,OAAA,CAAAF,YAAA,GAAAA,YAAA;AAEnC,eAAeG,kBAAkBA,CAAI;EAC1CC,MAAM;EACNC,QAAQ,GAAG,GAAG;EACdC,WAAW,GAAG;AAKhB,CAAC,EAAc;EACb,IAAIC,QAAW;EACf,MAAMC,KAAK,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;EACxB,GAAG;IACDH,QAAQ,GAAG,MAAMH,MAAM,CAAC,CAAC;IAEzB,MAAM,IAAAO,wBAAU,EAACN,QAAQ,CAAC;IAC1B,IAAII,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGF,KAAK,GAAGF,WAAW,EAAE;MACpC;IACF;EACF,CAAC,QAAQ,CAACC,QAAQ;EAElB,OAAOA,QAAQ;AACjB"}